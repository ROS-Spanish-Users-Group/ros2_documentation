<!DOCTYPE html>
<html class="writer-html5" lang="es" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Guía de migración desde ROS 1 &mdash; documentación de ROS 2 Documentation: Rolling - </title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/tabs.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="canonical" href="https://ros-spanish-users-group.github.io/ros2_documentation/rolling/The-ROS2-Project/Contributing/Migration-Guide.html" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
        <script src="../../_static/translations.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Índice" href="../../genindex.html" />
    <link rel="search" title="Búsqueda" href="../../search.html" />
    <link rel="next" title="Guía de Python sobre migración desde ROS1" href="Migration-Guide-Python.html" />
    <link rel="prev" title="Guía de calidad: garantizar la calidad del código" href="Quality-Guide.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> ROS 2 Documentation: Rolling
            <img src="../../_static/rolling-small.png" class="logo" alt="Logotipo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Buscar documentos" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../Installation.html">Instalación</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../Installation/Ubuntu-Install-Debians.html">Ubuntu (Debian)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Installation/Windows-Install-Binary.html">Ubuntu (binarios)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Installation/RHEL-Install-RPMs.html">RHEL (RPM)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Installation/Alternatives.html">Alternativas</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Installation/Alternatives/Ubuntu-Development-Setup.html">Ubuntu (fuentes)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Installation/Alternatives/Ubuntu-Install-Binary.html">Ubuntu (binarios)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Installation/Alternatives/Windows-Development-Setup.html">Windows (fuentes)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Installation/Alternatives/RHEL-Development-Setup.html">RHEL (fuentes)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Installation/Alternatives/RHEL-Install-Binary.html">RHEL (binarios)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Installation/Alternatives/macOS-Development-Setup.html">macOS (fuentes)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Installation/Alternatives/Fedora-Development-Setup.html">Fedora (fuentes)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Installation/Alternatives/Latest-Development-Setup.html">Últimos desarrollos (fuentes)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Installation/Maintaining-a-Source-Checkout.html">Mantener los fuentes obtenidos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Installation/Testing.html">Pruebas con archivos binarios pre-relase</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Installation/DDS-Implementations.html">implementaciones de DDS</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Installation/DDS-Implementations/Install-Connext-Security-Plugins.html">Complementos de seguridad de Connext</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Installation/DDS-Implementations/Install-Connext-University-Eval.html">RTI Connex DDS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Installation/DDS-Implementations/Working-with-Eclipse-CycloneDDS.html">Eclipse Cyclone DDS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Installation/DDS-Implementations/Working-with-GurumNetworks-GurumDDS.html">GurumNetworks GurumDDS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Installation/DDS-Implementations/Working-with-eProsima-Fast-DDS.html">eProsima Fast DDS</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../Releases.html">Distributions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../Releases/Release-Humble-Hawksbill.html">Humble Hawksbill (<code class="docutils literal notranslate"><span class="pre">humble</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Releases/Humble-Hawksbill-Complete-Changelog.html">Humble Hawksbill changelog</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Releases/Release-Foxy-Fitzroy.html">Foxy Fitzroy (<code class="docutils literal notranslate"><span class="pre">foxy</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Releases/Release-Rolling-Ridley.html">Rolling Ridley (<code class="docutils literal notranslate"><span class="pre">rolling</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Releases/Development.html">Development Distribution</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Releases/Release-Iron-Irwini.html">ROS 2 Iron Irwini (codename “iron”; May, 2023)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Releases/End-of-Life.html">End-of-Life Distributions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Releases/Release-Galactic-Geochelone.html">Galactic Geochelone (<code class="docutils literal notranslate"><span class="pre">galactic</span></code>)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../Releases/Galactic-Geochelone-Complete-Changelog.html">Galactic Geochelone changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../Releases/Release-Eloquent-Elusor.html">Eloquent Elusor (<code class="docutils literal notranslate"><span class="pre">eloquent</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Releases/Release-Dashing-Diademata.html">Dashing Diademata (<code class="docutils literal notranslate"><span class="pre">dashing</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Releases/Release-Crystal-Clemmys.html">Crystal Clemmys (<code class="docutils literal notranslate"><span class="pre">crystal</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Releases/Release-Bouncy-Bolson.html">Bouncy Bolson (<code class="docutils literal notranslate"><span class="pre">bouncy</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Releases/Release-Ardent-Apalone.html">Ardent Apalone (<code class="docutils literal notranslate"><span class="pre">ardent</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Releases/Beta3-Overview.html">Beta 3 (<code class="docutils literal notranslate"><span class="pre">r2b3</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Releases/Beta2-Overview.html">Beta 2 (<code class="docutils literal notranslate"><span class="pre">r2b2</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Releases/Beta1-Overview.html">Beta 1 (<code class="docutils literal notranslate"><span class="pre">Asphalt</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Releases/Alpha-Overview.html">Alphas</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Releases/Release-Process.html">Development process for a release</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../Tutorials.html">Tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../Tutorials/Beginner-CLI-Tools.html">Beginner: CLI tools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-CLI-Tools/Configuring-ROS2-Environment.html">Configuring environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-CLI-Tools/Introducing-Turtlesim/Introducing-Turtlesim.html">Utilizar <code class="docutils literal notranslate"><span class="pre">turtlesim</span></code> y <code class="docutils literal notranslate"><span class="pre">rqt</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-CLI-Tools/Understanding-ROS2-Nodes/Understanding-ROS2-Nodes.html">Comprender los Nodos</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-CLI-Tools/Understanding-ROS2-Topics/Understanding-ROS2-Topics.html">Comprender los Topics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-CLI-Tools/Understanding-ROS2-Services/Understanding-ROS2-Services.html">Understanding services</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-CLI-Tools/Understanding-ROS2-Parameters/Understanding-ROS2-Parameters.html">Comprender los Parámetros</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-CLI-Tools/Understanding-ROS2-Actions/Understanding-ROS2-Actions.html">Understanding actions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-CLI-Tools/Using-Rqt-Console/Using-Rqt-Console.html">Using <code class="docutils literal notranslate"><span class="pre">rqt_console</span></code> to view logs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-CLI-Tools/Launching-Multiple-Nodes/Launching-Multiple-Nodes.html">Launching nodes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-CLI-Tools/Recording-And-Playing-Back-Data/Recording-And-Playing-Back-Data.html">Recording and playing back data</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Tutorials/Beginner-Client-Libraries.html">Beginner: Client libraries</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-Client-Libraries/Colcon-Tutorial.html">Using <code class="docutils literal notranslate"><span class="pre">colcon</span></code> to build packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-Client-Libraries/Creating-A-Workspace/Creating-A-Workspace.html">Creating a workspace</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-Client-Libraries/Creating-Your-First-ROS2-Package.html">Creating a package</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-Client-Libraries/Writing-A-Simple-Cpp-Publisher-And-Subscriber.html">Writing a simple publisher and subscriber (C++)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-Client-Libraries/Writing-A-Simple-Py-Publisher-And-Subscriber.html">Writing a simple publisher and subscriber (Python)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-Client-Libraries/Writing-A-Simple-Cpp-Service-And-Client.html">Writing a simple service and client (C++)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-Client-Libraries/Writing-A-Simple-Py-Service-And-Client.html">Writing a simple service and client (Python)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-Client-Libraries/Custom-ROS2-Interfaces.html">Creating custom msg and srv files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-Client-Libraries/Single-Package-Define-And-Use-Interface.html">Implementing custom interfaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-Client-Libraries/Using-Parameters-In-A-Class-CPP.html">Using parameters in a class (C++)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-Client-Libraries/Using-Parameters-In-A-Class-Python.html">Using parameters in a class (Python)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-Client-Libraries/Getting-Started-With-Ros2doctor.html">Using <code class="docutils literal notranslate"><span class="pre">ros2doctor</span></code> to identify issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-Client-Libraries/Pluginlib.html">Creating and using plugins (C++)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Tutorials/Intermediate.html">Intermediate</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Intermediate/Rosdep.html">Managing Dependencies with rosdep</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Intermediate/Creating-an-Action.html">Creating an action</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Intermediate/Writing-an-Action-Server-Client/Cpp.html">Writing an action server and client (C++)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Intermediate/Writing-an-Action-Server-Client/Py.html">Writing an action server and client (Python)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Intermediate/Composition.html">Composing multiple nodes in a single process</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Intermediate/Monitoring-For-Parameter-Changes-CPP.html">Monitoring for parameter changes (C++)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Intermediate/Launch/Launch-Main.html">Launch</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Launch/Creating-Launch-Files.html">Crear un fichero de launch</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Launch/Launch-system.html">Integrar ficheros de launch a paquetes de ROS 2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Launch/Using-Substitutions.html">Using substitutions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Launch/Using-Event-Handlers.html">Utilizar controladores de eventos</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Launch/Using-ROS2-Launch-For-Large-Projects.html">Managing large projects</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Intermediate/Tf2/Tf2-Main.html"><code class="docutils literal notranslate"><span class="pre">tf2</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Tf2/Introduction-To-Tf2.html">Introducing <code class="docutils literal notranslate"><span class="pre">tf2</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Tf2/Writing-A-Tf2-Static-Broadcaster-Py.html">Writing a static broadcaster (Python)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Tf2/Writing-A-Tf2-Static-Broadcaster-Cpp.html">Writing a static broadcaster (C++)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Tf2/Writing-A-Tf2-Broadcaster-Py.html">Writing a broadcaster (Python)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Tf2/Writing-A-Tf2-Broadcaster-Cpp.html">Writing a broadcaster (C++)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Tf2/Writing-A-Tf2-Listener-Py.html">Writing a listener (Python)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Tf2/Writing-A-Tf2-Listener-Cpp.html">Writing a listener (C++)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Tf2/Adding-A-Frame-Py.html">Adding a frame (Python)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Tf2/Adding-A-Frame-Cpp.html">Adding a frame (C++)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Tf2/Learning-About-Tf2-And-Time-Py.html">Using time (Python)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Tf2/Learning-About-Tf2-And-Time-Cpp.html">Using time (C++)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Tf2/Time-Travel-With-Tf2-Py.html">Traveling in time (Python)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Tf2/Time-Travel-With-Tf2-Cpp.html">Traveling in time (C++)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Tf2/Debugging-Tf2-Problems.html">Debugging</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Tf2/Quaternion-Fundamentals.html">Quaternion fundamentals</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Tf2/Using-Stamped-Datatypes-With-Tf2-Ros-MessageFilter.html">Using stamped datatypes with <code class="docutils literal notranslate"><span class="pre">tf2_ros::MessageFilter</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Intermediate/Testing/Testing-Main.html">Testing</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Testing/CLI.html">Running Tests in ROS 2 from the Command Line</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Testing/Cpp.html">Writing Basic Tests with C++ with GTest</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Testing/Python.html">Writing Basic Tests with Python</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Intermediate/URDF/URDF-Main.html">URDF</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/URDF/Building-a-Visual-Robot-Model-with-URDF-from-Scratch.html">Building a visual robot model from scratch</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/URDF/Building-a-Movable-Robot-Model-with-URDF.html">Building a movable robot model</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/URDF/Adding-Physical-and-Collision-Properties-to-a-URDF-Model.html">Adding physical and collision properties</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/URDF/Using-Xacro-to-Clean-Up-a-URDF-File.html">Using Xacro to clean up your code</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/URDF/Using-URDF-with-Robot-State-Publisher.html">Using URDF with <code class="docutils literal notranslate"><span class="pre">robot_state_publisher</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Tutorials/Advanced.html">Advanced</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Advanced/Topic-Statistics-Tutorial/Topic-Statistics-Tutorial.html">Enabling topic statistics (C++)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Advanced/Discovery-Server/Discovery-Server.html">Using Fast DDS Discovery Server as discovery protocol [community-contributed]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Advanced/Allocator-Template-Tutorial.html">Implementing a custom memory allocator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Advanced/FastDDS-Configuration.html">Unlocking the potential of Fast DDS middleware [community-contributed]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Advanced/Recording-A-Bag-From-Your-Own-Node-CPP.html">Recording a bag from a node (C++)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Advanced/Recording-A-Bag-From-Your-Own-Node-Py.html">Recording a bag from a node (Python)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Advanced/Simulators/Simulation-Main.html">Simulation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Advanced/Simulators/Webots.html">Setting up a robot simulation (Webots)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Advanced/Simulators/Gazebo.html">Setting up a robot simulation (Gazebo)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Advanced/Security/Security-Main.html">Security</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Advanced/Security/Introducing-ros2-security.html">Setting up security</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Advanced/Security/The-Keystore.html">Understanding the security keystore</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Advanced/Security/Security-on-Two.html">Ensuring security across machines</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Advanced/Security/Examine-Traffic.html">Examining network traffic</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Advanced/Security/Access-Controls.html">Setting access controls</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Advanced/Security/Deployment-Guidelines.html">Deployment Guidelines</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Tutorials/Demos.html">Demos</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Demos/Quality-of-Service.html">Uso de configuraciones de calidad de servicio para redes con pérdidas</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Demos/Managed-Nodes.html">Gestión de lifecycle nodes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Demos/Intra-Process-Communication.html">Establecer una comunicación intraproceso eficiente</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Demos/Rosbag-with-ROS1-Bridge.html">Grabación y reproducción de datos con <code class="docutils literal notranslate"><span class="pre">rosbag</span></code> utilizando ROS 1 bridge</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Demos/Real-Time-Programming.html">Understanding real-time programming</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Demos/dummy-robot-demo.html">Experimentando con un robot ficticio</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Demos/Logging-and-logger-configuration.html">Registro de mensajes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Demos/Content-Filtering-Subscription.html">Creación de un suscriptor de filtrado de contenido</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Tutorials/Miscellaneous.html">Miscellaneous</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Miscellaneous/Deploying-ROS-2-on-IBM-Cloud.html">Deploying on IBM Cloud Kubernetes [community-contributed]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Miscellaneous/Eclipse-Oxygen-with-ROS-2-and-rviz2.html">Using Eclipse Oxygen with <code class="docutils literal notranslate"><span class="pre">rviz2</span></code> [community-contributed]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Miscellaneous/Building-Realtime-rt_preempt-kernel-for-ROS-2.html">Building a real-time Linux kernel [community-contributed]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Miscellaneous/Building-ROS2-Package-with-eclipse-2021-06.html">Building a package with Eclipse 2021-06</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../How-To-Guides.html">How-to Guides</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Installation-Troubleshooting.html">Installation troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Developing-a-ROS-2-Package.html">Developing a ROS 2 package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Ament-CMake-Documentation.html">ament_cmake user documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Ament-CMake-Python-Documentation.html">ament_cmake_python user documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Launch-files-migration-guide.html">Migrating launch files from ROS 1 to ROS 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Launch-file-different-formats.html">Using Python, XML, and YAML for ROS 2 Launch Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Launching-composable-nodes.html">Using ROS 2 launch to launch composable nodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Parameters-YAML-files-migration-guide.html">Migrating YAML parameter files from ROS 1 to ROS 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Node-arguments.html">Passing ROS arguments to nodes via the command-line</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Sync-Vs-Async.html">Synchronous vs. asynchronous service clients</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/DDS-tuning.html">DDS tuning information</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Overriding-QoS-Policies-For-Recording-And-Playback.html">rosbag2: Overriding QoS Policies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Working-with-multiple-RMW-implementations.html">Working with multiple ROS 2 middleware implementations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Cross-compilation.html">Cross-compilation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Releasing/Releasing-a-Package.html">Releasing a Package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../How-To-Guides/Releasing/First-Time-Release.html">First Time Release</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../How-To-Guides/Releasing/Subsequent-Releases.html">Subsequent Releases</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../How-To-Guides/Releasing/Release-Team-Repository.html">Release Team / Repository</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../How-To-Guides/Releasing/Release-Track.html">Release Track</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Using-Python-Packages.html">Using Python Packages with ROS 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/RQt-Port-Plugin-Windows.html">Porting RQt plugins to Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Run-2-nodes-in-single-or-separate-docker-containers.html">Running ROS 2 nodes in Docker [community-contributed]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Visualizing-ROS-2-Data-With-Foxglove-Studio.html">Visualizing ROS 2 data with Foxglove Studio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Package-maintainer-guide.html">ROS 2 Package Maintainer Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Building-a-Custom-Debian-Package.html">Building a custom Debian package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Building-ROS-2-with-Tracing-Instrumentation.html">Building ROS 2 with tracing instrumentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Topics-Services-Actions.html">Topics vs Services vs Actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Using-Variants.html">Using variants</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Using-ros2-param.html">Using the <code class="docutils literal notranslate"><span class="pre">ros2</span> <span class="pre">param</span></code> command-line tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Using-ros1_bridge-Jammy-upstream.html">Using <code class="docutils literal notranslate"><span class="pre">ros1_bridge</span></code> with upstream ROS on Ubuntu 22.04</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Disabling-ZeroCopy-loaned-messages.html">Disabling Zero Copy Loaned Messages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Installing-on-Raspberry-Pi.html">ROS 2 on Raspberry Pi</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Using-callback-groups.html">Using Callback Groups</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Setup-ROS-2-with-VSCode-and-Docker-Container.html">Setup ROS 2 with VSCode and Docker [community-contributed]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/RQt-Source-Install.html">Building RQt from source</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../How-To-Guides/RQt-Source-Install-MacOS.html">Building RQt from source on macOS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../How-To-Guides/RQt-Source-Install-Windows10.html">Building RQt from source on Windows 10</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../Concepts.html">Concepts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Domain-ID.html">The ROS_DOMAIN_ID</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Different-Middleware-Vendors.html">About different ROS 2 DDS/RTPS vendors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Logging.html">About logging and logger configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Quality-of-Service-Settings.html">About Quality of Service settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-ROS-2-Client-Libraries.html">About ROS 2 client libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-ROS-Interfaces.html">About ROS 2 interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-ROS-2-Parameters.html">About parameters in ROS 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Executors.html">Executors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Topic-Statistics.html">About topic statistics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Command-Line-Tools.html">Introspection with command line tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-RQt.html">Overview and usage of RQt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Composition.html">About Composition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Catment.html">On the mixing of ament and catkin (catment)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Cross-Compilation.html">About Cross-compilation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Security.html">About ROS 2 Security</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Tf2.html">About tf2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Build-System.html">About the build system</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Internal-Interfaces.html">About internal ROS 2 interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Middleware-Implementations.html">About ROS 2 middleware implementations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-ROS-2-Client-Libraries.html">About ROS 2 client libraries</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../Contact.html">Contacto</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../The-ROS2-Project.html">The ROS 2 Project</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../Contributing.html">Contribuir</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="Developer-Guide.html">Guía para desarrolladores de ROS 2</a></li>
<li class="toctree-l3"><a class="reference internal" href="Code-Style-Language-Versions.html">Estilo de código y versiones de lenguaje</a></li>
<li class="toctree-l3"><a class="reference internal" href="Quality-Guide.html">Guía de calidad: garantizar la calidad del código</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Guía de migración desde ROS 1</a><ul>
<li class="toctree-l4"><a class="reference internal" href="Migration-Guide-Python.html">Guía de Python sobre migración desde ROS1</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="Build-Farms.html">ROS Build Farms</a></li>
<li class="toctree-l3"><a class="reference internal" href="Windows-Tips-and-Tricks.html">Consejos y trucos de Windows</a></li>
<li class="toctree-l3"><a class="reference internal" href="Contributing-To-ROS-2-Documentation.html">Contribuir a la Documentación de  ROS 2</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Features.html">Features Status</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Feature-Ideas.html">Feature Ideas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Roadmap.html">Roadmap</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ROSCon-Content.html">ROSCon Talks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Governance.html">Project Governance</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Governance/ROS2-TSC-Charter.html">ROS 2 Technical Steering Committee Charter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Governance/ROS2-TSC-Intake-process.html">ROS 2 TSC applicant intake process</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Governance/How-To-Start-A-Community-Working-Group.html">How to Start a Community Working Group</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Marketing.html">Marketing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../API-Docs.html">API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Related-Projects.html">Related Projects</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../Related-Projects/Intel-ROS2-Projects.html">Proyectos de Intel en ROS 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Related-Projects/Nvidia-ROS2-Projects.html">Proyectos de ROS 2 por NVIDIA</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../Glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Citations.html">Citas</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">ROS 2 Documentation: Rolling</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../../The-ROS2-Project.html">The ROS 2 Project</a></li>
          <li class="breadcrumb-item"><a href="../Contributing.html">Contribuir</a></li>
      <li class="breadcrumb-item active">Guía de migración desde ROS 1</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/ros2/ros2_documentation/blob/rolling/source/The-ROS2-Project/Contributing/Migration-Guide.rst" class="fa fa-github"> Editar en GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             

<p>
  <strong>
    
    Estás leyendo la documentación para una versión de desarrollo.
    Para la última versión publicada, por favor revisa <a href="../../../humble/The-ROS2-Project/Contributing/Migration-Guide.html">Humble</a>.
    
  </strong>
</p>


  <div class="section" id="guia-de-migracion-desde-ros-1">
<h1>Guía de migración desde ROS 1<a class="headerlink" href="#guia-de-migracion-desde-ros-1" title="Enlazar permanentemente con este título"></a></h1>
<div class="contents local topic" id="tabla-de-contenido">
<p class="topic-title">Tabla de Contenido</p>
<ul class="simple">
<li><p><a class="reference internal" href="#requisitos-previos" id="id1">Requisitos previos</a></p></li>
<li><p><a class="reference internal" href="#pasos-de-migracion" id="id2">Pasos de migración</a></p>
<ul>
<li><p><a class="reference internal" href="#manifiestos-de-paquete" id="id3">Manifiestos de paquete</a></p></li>
<li><p><a class="reference internal" href="#metapaquetes" id="id4">Metapaquetes</a></p></li>
<li><p><a class="reference internal" href="#definiciones-de-mensajes-servicios-y-acciones" id="id5">Definiciones de mensajes, servicios y acciones</a></p></li>
<li><p><a class="reference internal" href="#sistema-de-construccion" id="id6">Sistema de construcción</a></p></li>
<li><p><a class="reference internal" href="#actualizar-codigo-fuente" id="id7">Actualizar código fuente</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#parametros" id="id8">Parámetros</a></p></li>
<li><p><a class="reference internal" href="#iniciar-archivos" id="id9">Iniciar archivos</a></p></li>
<li><p><a class="reference internal" href="#ejemplo-convertir-un-paquete-ros-1-existente-para-usar-ros-2" id="id10">Ejemplo: convertir un paquete ROS 1 existente para usar ROS 2</a></p>
<ul>
<li><p><a class="reference internal" href="#el-codigo-ros-1" id="id11">El código ROS 1</a></p></li>
<li><p><a class="reference internal" href="#migracion-a-ros-2" id="id12">Migración a ROS 2</a></p></li>
<li><p><a class="reference internal" href="#actualizar-scripts" id="id13">Actualizar scripts</a></p></li>
<li><p><a class="reference internal" href="#mas-ejemplos-y-herramientas" id="id14">Más ejemplos y herramientas</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#licencia" id="id15">Licencia</a></p>
<ul>
<li><p><a class="reference internal" href="#cambiar-la-licencia" id="id16">Cambiar la licencia</a></p></li>
</ul>
</li>
</ul>
</div>
<p>Hay dos tipos diferentes de migraciones de paquetes:</p>
<ul class="simple">
<li><dl class="simple">
<dt>Migrar el código fuente de un paquete existente de ROS 1 a ROS 2 con la intención de que una parte significativa del código fuente permanezca igual o al menos similar.</dt><dd><p>Un ejemplo de esto podría ser <a class="reference external" href="https://github.com/ros/pluginlib">pluginlib</a> donde el código fuente se mantiene en diferentes ramas dentro del mismo repositorio y, por lo general, los parches se pueden transferir entre esas ramas cuando sea necesario.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Implementar la misma o similar funcionalidad de un paquete ROS 1 para ROS 2 pero asumiendo que el código fuente será significativamente diferente.</dt><dd><p>Un ejemplo de esto podría ser <a class="reference external" href="https://github.com/ros/ros_comm/tree/melodic-devel/clients/roscpp">roscpp</a> en ROS 1 y <a class="reference external" href="https://github.com/ros2/rclcpp/tree/rolling/rclcpp">rclcpp</a> en ROS 2, que son repositorios separados y no comparten ningún código.</p>
</dd>
</dl>
</li>
</ul>
<p>Este artículo se centra en el caso anterior y describe los pasos de alto nivel para migrar un paquete ROS 1 a ROS 2.
No pretende ser una instrucción de migración paso a paso y no se considera la «solución» <em>final</em>.
Las versiones futuras tendrán como objetivo hacer que la migración sea más fluida y con menos esfuerzo hasta el punto de mantener un solo paquete desde la misma rama para ROS 1 y ROS 2.</p>
<div class="section" id="requisitos-previos">
<h2><a class="toc-backref" href="#id1">Requisitos previos</a><a class="headerlink" href="#requisitos-previos" title="Enlazar permanentemente con este título"></a></h2>
<p>Antes de poder migrar un paquete de ROS 1 a ROS 2, todas sus dependencias deben estar disponibles en ROS 2.</p>
</div>
<div class="section" id="pasos-de-migracion">
<h2><a class="toc-backref" href="#id2">Pasos de migración</a><a class="headerlink" href="#pasos-de-migracion" title="Enlazar permanentemente con este título"></a></h2>
<div class="contents local topic" id="contenido">
<ul class="simple">
<li><p><a class="reference internal" href="#manifiestos-de-paquete" id="id17">Manifiestos de paquete</a></p></li>
<li><p><a class="reference internal" href="#metapaquetes" id="id18">Metapaquetes</a></p></li>
<li><p><a class="reference internal" href="#definiciones-de-mensajes-servicios-y-acciones" id="id19">Definiciones de mensajes, servicios y acciones</a></p></li>
<li><p><a class="reference internal" href="#sistema-de-construccion" id="id20">Sistema de construcción</a></p></li>
<li><p><a class="reference internal" href="#actualizar-codigo-fuente" id="id21">Actualizar código fuente</a></p></li>
</ul>
</div>
<div class="section" id="manifiestos-de-paquete">
<h3><a class="toc-backref" href="#id17">Manifiestos de paquete</a><a class="headerlink" href="#manifiestos-de-paquete" title="Enlazar permanentemente con este título"></a></h3>
<p>ROS 2 no admite el formato 1 de la especificación del paquete, sino solo las versiones de formato más nuevas (2 y superiores).
Por lo tanto, el archivo <code class="docutils literal notranslate"><span class="pre">package.xml</span></code> debe actualizarse al menos al formato 2 si usa el formato 1.
Dado que ROS 1 admite todos los formatos, es seguro realizar esa conversión en el paquete ROS 1.</p>
<p>Algunos paquetes pueden tener nombres diferentes en ROS 2, por lo que es posible que las dependencias deban actualizarse en consecuencia.</p>
</div>
<div class="section" id="metapaquetes">
<h3><a class="toc-backref" href="#id18">Metapaquetes</a><a class="headerlink" href="#metapaquetes" title="Enlazar permanentemente con este título"></a></h3>
<p>ROS 2 no tiene un tipo de paquete especial para metapaquetes.
Los metapaquetes aún pueden existir como paquetes regulares que solo contienen dependencias de tiempo de ejecución.
Al migrar metapaquetes desde ROS 1, simplemente elimina la etiqueta <code class="docutils literal notranslate"><span class="pre">&lt;metapackage</span> <span class="pre">/&gt;</span></code> en el archivo de manifiesto de tu paquete.</p>
</div>
<div class="section" id="definiciones-de-mensajes-servicios-y-acciones">
<h3><a class="toc-backref" href="#id19">Definiciones de mensajes, servicios y acciones</a><a class="headerlink" href="#definiciones-de-mensajes-servicios-y-acciones" title="Enlazar permanentemente con este título"></a></h3>
<p>Los archivos de mensajes deben terminar en <code class="docutils literal notranslate"><span class="pre">.msg</span></code> y deben ubicarse en la subcarpeta <code class="docutils literal notranslate"><span class="pre">msg</span></code>.
Los archivos de servicio deben terminar en <code class="docutils literal notranslate"><span class="pre">.srv</span></code> y deben estar ubicados en la subcarpeta <code class="docutils literal notranslate"><span class="pre">srv</span></code>.
Los archivos de acciones deben terminar en <code class="docutils literal notranslate"><span class="pre">.action</span></code> y deben ubicarse en la subcarpeta <code class="docutils literal notranslate"><span class="pre">action</span></code>.</p>
<p>Es posible que estos archivos deban actualizarse para cumplir con la definición de la interfaz <a class="reference external" href="https://design.ros2.org/articles/interface_definition.html">ROS</a>.
Se han eliminado algunos tipos primitivos y los tipos <code class="docutils literal notranslate"><span class="pre">duration</span></code> y <code class="docutils literal notranslate"><span class="pre">time</span></code> que eran tipos incorporados en ROS 1 se han reemplazado con definiciones de mensajes normales y deben usarse desde <a class="reference external" href="https://github.com/ros2/rcl_interfaces/tree/rolling/builtin_interfaces">builtin_interfaces</a> paquete.
Además, algunas convenciones de nomenclatura son más estrictas que en ROS 1.</p>
<p>En tu <code class="docutils literal notranslate"><span class="pre">package..xml</span></code>:</p>
<ul class="simple">
<li><p>Agregar <code class="docutils literal notranslate"><span class="pre">&lt;buildtool_depend&gt;rosidl_default_generators&lt;/buildtool_depend&gt;</span></code>.</p></li>
<li><p>Agregar <code class="docutils literal notranslate"><span class="pre">&lt;exec_depend&gt;rosidl_default_runtime&lt;/exec_depend&gt;</span></code>.</p></li>
<li><p>Para cada paquete de mensajes dependiente, agrega <code class="docutils literal notranslate"><span class="pre">&lt;depend&gt;message_package&lt;/depend&gt;</span></code>.</p></li>
</ul>
<p>En tu <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code>:</p>
<ul class="simple">
<li><p>Comienza habilitando C++14</p></li>
</ul>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">set</span><span class="p">(</span><span class="s">CMAKE_CXX_STANDARD</span><span class="w"> </span><span class="s">14</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Añadir <code class="docutils literal notranslate"><span class="pre">find_package(rosidl_default_generators</span> <span class="pre">REQUIRED)</span></code></p></li>
<li><p>Para cada paquete de mensajes dependiente, agrega <code class="docutils literal notranslate"><span class="pre">find_package(message_package</span> <span class="pre">REQUIRED)</span></code> y remplaza la llamada de función CMake a <code class="docutils literal notranslate"><span class="pre">generate_messages</span></code> con <code class="docutils literal notranslate"><span class="pre">rosidl_generate_interfaces</span></code>.</p></li>
</ul>
<p>Esto reemplazará la lista <code class="docutils literal notranslate"><span class="pre">add_message_files</span></code> y <code class="docutils literal notranslate"><span class="pre">add_service_files</span></code> de todos los archivos de mensajes y servicios, que se pueden eliminar.</p>
</div>
<div class="section" id="sistema-de-construccion">
<h3><a class="toc-backref" href="#id20">Sistema de construcción</a><a class="headerlink" href="#sistema-de-construccion" title="Enlazar permanentemente con este título"></a></h3>
<p>El sistema de construcción en ROS 2 se llama <a class="reference external" href="https://design.ros2.org/articles/ament.html">ament</a>
y la herramienta de compilación es <a class="reference internal" href="../../Tutorials/Beginner-Client-Libraries/Colcon-Tutorial.html"><span class="doc">colcon</span></a>.
Ament se basa en CMake: <code class="docutils literal notranslate"><span class="pre">ament_cmake</span></code> proporciona funciones de CMake para facilitar la escritura de archivos <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code>.</p>
<div class="section" id="herramienta-de-compilacion">
<h4>Herramienta de compilación<a class="headerlink" href="#herramienta-de-compilacion" title="Enlazar permanentemente con este título"></a></h4>
<p>En lugar de usar <code class="docutils literal notranslate"><span class="pre">catkin_make</span></code>, <code class="docutils literal notranslate"><span class="pre">catkin_make_isolated</span></code> o <code class="docutils literal notranslate"><span class="pre">catkin</span> <span class="pre">build</span></code>, ROS 2 usa la herramienta de línea de comandos <a class="reference external" href="https://design.ros2.org/articles/build_tool.html">colcon</a> para construir e instalar un conjunto de paquetes.</p>
</div>
<div class="section" id="paquete-python-puro">
<h4>Paquete Python puro<a class="headerlink" href="#paquete-python-puro" title="Enlazar permanentemente con este título"></a></h4>
<p>Si el paquete ROS 1 usa CMake solo para invocar el archivo <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> y no contiene nada además del código Python (por ejemplo, no tiene mensajes, servicios, etc.), debe convertirse en un paquete Python puro en ROS 2 :</p>
<ul>
<li><p>Actualiza o agrega el tipo de compilación en el archivo <code class="docutils literal notranslate"><span class="pre">package.xml</span></code>:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;export&gt;</span>
  <span class="nt">&lt;build_type&gt;</span>ament_python<span class="nt">&lt;/build_type&gt;</span>
<span class="nt">&lt;/export&gt;</span>
</pre></div>
</div>
</li>
<li><p>Elimina el archivo <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code></p></li>
<li><p>Actualiza los <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> para que sea un script de configuración estándar de Python</p></li>
</ul>
<p>ROS 2 solo es compatible con Python 3.
Si bien cada paquete puede optar por admitir también Python 2, debe invocar ejecutables con Python 3 si utiliza cualquier API proporcionada por otros paquetes de ROS 2.</p>
</div>
<div class="section" id="actualiza-el-cmakelists-txt-para-usar-ament-cmake">
<h4>Actualiza el <em>CMakeLists.txt</em> para usar <em>ament_cmake</em><a class="headerlink" href="#actualiza-el-cmakelists-txt-para-usar-ament-cmake" title="Enlazar permanentemente con este título"></a></h4>
<p>Aplica los siguientes cambios para usar <code class="docutils literal notranslate"><span class="pre">ament_cmake</span></code> en lugar de <code class="docutils literal notranslate"><span class="pre">catkin</span></code>:</p>
<ul>
<li><blockquote>
<div><p>Configura el tipo de compilación en la sección de exportación del archivo <code class="docutils literal notranslate"><span class="pre">package.xml</span></code>:</p>
</div></blockquote>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;export&gt;</span>
  <span class="nt">&lt;build_type&gt;</span>ament_cmake<span class="nt">&lt;/build_type&gt;</span>
<span class="nt">&lt;/export&gt;</span>
</pre></div>
</div>
</li>
<li><blockquote>
<div><p>Remplaza la invocación <code class="docutils literal notranslate"><span class="pre">find_package</span></code> con <code class="docutils literal notranslate"><span class="pre">catkin</span></code> y <code class="docutils literal notranslate"><span class="pre">COMPONENTS</span></code> con:</p>
</div></blockquote>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">find_package</span><span class="p">(</span><span class="s">ament_cmake</span><span class="w"> </span><span class="s">REQUIRED</span><span class="p">)</span>
<span class="nb">find_package</span><span class="p">(</span><span class="s">component1</span><span class="w"> </span><span class="s">REQUIRED</span><span class="p">)</span>
<span class="c"># ...</span>
<span class="nb">find_package</span><span class="p">(</span><span class="s">componentN</span><span class="w"> </span><span class="s">REQUIRED</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>Mueve y actualiza la invocación <code class="docutils literal notranslate"><span class="pre">catkin_package</span></code> con:</p>
<ul class="simple">
<li><p>En su lugar, invoca <code class="docutils literal notranslate"><span class="pre">ament_package</span></code> pero <strong>después</strong> de que se hayan registrado todos los objetivos.</p></li>
<li><p>El único argumento válido para <a class="reference external" href="https://github.com/ament/ament_cmake/blob/rolling/ament_cmake_core/cmake/core/ament_package.cmake">ament_package</a> es <code class="docutils literal notranslate"><span class="pre">CONFIG_EXTRAS</span></code>.
Todos los demás argumentos están cubiertos por funciones separadas que deben invocarse <em>antes</em> de <code class="docutils literal notranslate"><span class="pre">ament_package</span></code>:</p>
<ul>
<li><p>En lugar de pasar <code class="docutils literal notranslate"><span class="pre">CATKIN_DEPENDS</span> <span class="pre">...</span></code> llamar <code class="docutils literal notranslate"><span class="pre">ament_export_dependencies(...)</span></code> antes.</p></li>
<li><p>En lugar de pasar <code class="docutils literal notranslate"><span class="pre">INCLUDE_DIRS</span> <span class="pre">...</span></code> llamar  <code class="docutils literal notranslate"><span class="pre">ament_export_include_directories(...)</span></code> antes.</p></li>
<li><p>En lugar de pasar <code class="docutils literal notranslate"><span class="pre">BIBLIOTECAS</span> <span class="pre">...</span></code> llamar <code class="docutils literal notranslate"><span class="pre">ament_export_libraries(...)</span></code> antes.</p></li>
</ul>
</li>
<li><p><strong>POR REALIZAR documento ament_export_targets (``ament_export_interfaces`` en Eloquent y anteriores)?</strong></p></li>
</ul>
</li>
<li><p>Remplaza la invocación de <code class="docutils literal notranslate"><span class="pre">add_message_files</span></code>, <code class="docutils literal notranslate"><span class="pre">add_service_files</span></code> y <code class="docutils literal notranslate"><span class="pre">generate_messages</span></code> con <a class="reference external" href="https://github.com/ros2/rosidl/blob/rolling/rosidl_cmake/cmake/rosidl_generate_interfaces.cmake">rosidl_generate_interfaces</a>.</p>
<ul>
<li><p>El primer argumento es el <code class="docutils literal notranslate"><span class="pre">target_name</span></code>.
Si está creando una sola biblioteca, es <code class="docutils literal notranslate"><span class="pre">${PROJECT_NAME}</span></code></p></li>
<li><p>Seguido de la lista de nombres de archivos de mensajes, relativos a la raíz del paquete.</p>
<ul class="simple">
<li><p>Si vas a utilizar la lista de nombres de archivos varias veces, se recomienda redactar una lista de archivos de mensajes y pasar la lista a la función para mayor claridad.</p></li>
</ul>
</li>
<li><p>El último argumento de palabra clave de múltiples valores para <code class="docutils literal notranslate"><span class="pre">generar_mensajes</span></code> es <code class="docutils literal notranslate"><span class="pre">DEPENDENCIAS</span></code>, que requiere la lista de paquetes de mensajes dependientes.</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">rosidl_generate_interfaces</span><span class="p">(</span><span class="o">${</span><span class="nv">PROJECT_NAME</span><span class="o">}</span>
<span class="w">  </span><span class="o">${</span><span class="nv">msg_files</span><span class="o">}</span>
<span class="w">  </span><span class="s">DEPENDENCIES</span><span class="w"> </span><span class="s">std_msgs</span>
<span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><blockquote>
<div><p>Elimina cualquier aparición del <em>espacio de desarrollo</em>.
Las variables de CMake relacionadas como <code class="docutils literal notranslate"><span class="pre">CATKIN_DEVEL_PREFIX</span></code> ya no existen.</p>
</div></blockquote>
<ul class="simple">
<li><p>Los argumentos <code class="docutils literal notranslate"><span class="pre">CATKIN_DEPENDS</span></code> y <code class="docutils literal notranslate"><span class="pre">DEPENDS</span></code> se pasan a la nueva función <a class="reference external" href="https://github.com/ament/ament_cmake/blob/rolling/ament_cmake_export_dependencies/cmake/ament_export_dependencies.cmake">ament_export_dependencies</a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CATKIN_GLOBAL_BIN_DESTINATION</span></code>: <code class="docutils literal notranslate"><span class="pre">bin</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CATKIN_GLOBAL_INCLUDE_DESTINATION</span></code>: <code class="docutils literal notranslate"><span class="pre">include</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CATKIN_GLOBAL_LIB_DESTINATION</span></code>: <code class="docutils literal notranslate"><span class="pre">lib</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CATKIN_GLOBAL_LIBEXEC_DESTINATION</span></code>: <code class="docutils literal notranslate"><span class="pre">lib</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CATKIN_GLOBAL_SHARE_DESTINATION</span></code>: <code class="docutils literal notranslate"><span class="pre">share</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CATKIN_PACKAGE_BIN_DESTINATION</span></code>: <code class="docutils literal notranslate"><span class="pre">lib/${PROJECT_NAME}</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CATKIN_PACKAGE_INCLUDE_DESTINATION</span></code>: <code class="docutils literal notranslate"><span class="pre">include/${PROJECT_NAME}</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CATKIN_PACKAGE_LIB_DESTINATION</span></code>: <code class="docutils literal notranslate"><span class="pre">lib</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CATKIN_PACKAGE_SHARE_DESTINATION</span></code>: <code class="docutils literal notranslate"><span class="pre">share/${PROJECT_NAME}</span></code></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="pruebas-unitarias">
<h4>Pruebas unitarias<a class="headerlink" href="#pruebas-unitarias" title="Enlazar permanentemente con este título"></a></h4>
<p>Si estás utilizando gtest:</p>
<p>Remplaza <code class="docutils literal notranslate"><span class="pre">CATKIN_ENABLE_TESTING</span></code> con <code class="docutils literal notranslate"><span class="pre">BUILD_TESTING</span></code>.
Remplaza <code class="docutils literal notranslate"><span class="pre">catkin_add_gtest</span></code> con <code class="docutils literal notranslate"><span class="pre">ament_add_gtest</span></code>.</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="gd">-   if (CATKIN_ENABLE_TESTING)</span><span class="w"></span>
<span class="gd">-     find_package(GTest REQUIRED)  # or rostest</span><span class="w"></span>
<span class="gd">-     include_directories(${GTEST_INCLUDE_DIRS})</span><span class="w"></span>
<span class="gd">-     catkin_add_gtest(${PROJECT_NAME}-some-test src/test/some_test.cpp)</span><span class="w"></span>
<span class="gd">-     target_link_libraries(${PROJECT_NAME}-some-test</span><span class="w"></span>
<span class="gd">-       ${PROJECT_NAME}_some_dependency</span><span class="w"></span>
<span class="gd">-       ${catkin_LIBRARIES}</span><span class="w"></span>
<span class="gd">-       ${GTEST_LIBRARIES})</span><span class="w"></span>
<span class="gd">-   endif()</span><span class="w"></span>
<span class="gi">+   if (BUILD_TESTING)</span><span class="w"></span>
<span class="gi">+     find_package(ament_cmake_gtest REQUIRED)</span><span class="w"></span>
<span class="gi">+     ament_add_gtest(${PROJECT_NAME}-some-test src/test/test_something.cpp)</span><span class="w"></span>
<span class="gi">+     ament_target_dependencies(${PROJECT_NAME)-some-test</span><span class="w"></span>
<span class="gi">+       &quot;rclcpp&quot;</span><span class="w"></span>
<span class="gi">+       &quot;std_msgs&quot;)</span><span class="w"></span>
<span class="gi">+     target_link_libraries(${PROJECT_NAME}-some-test</span><span class="w"></span>
<span class="gi">+       ${PROJECT_NAME}_some_dependency)</span><span class="w"></span>
<span class="gi">+   endif()</span><span class="w"></span>
</pre></div>
</div>
<p>Agrega <code class="docutils literal notranslate"><span class="pre">&lt;test_depend&gt;ament_cmake_gtest&lt;/test_depend&gt;</span></code> a tu <code class="docutils literal notranslate"><span class="pre">package.xml</span></code>.</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="gd">-   &lt;test_depend&gt;rostest&lt;/test_depend&gt;</span><span class="w"></span>
<span class="gi">+   &lt;test_depend&gt;ament_cmake_gtest&lt;/test_depend&gt;</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="linters">
<h4>Linters<a class="headerlink" href="#linters" title="Enlazar permanentemente con este título"></a></h4>
<p>En ROS 2 estamos trabajando para mantener un código limpio usando linters.
Los estilos para diferentes idiomas se definen en nuestra <a class="reference internal" href="Developer-Guide.html"><span class="doc">Guía para desarrolladores</span></a>.</p>
<p>Si estás comenzando un proyecto desde cero, se recomienda seguir la guía de estilo y activar las pruebas automáticas de unidades de linter agregando estas líneas justo debajo de <code class="docutils literal notranslate"><span class="pre">if(BUILD_TESTING)</span></code> (hasta la versión alfa 5, esto era <code class="docutils literal notranslate"><span class="pre">AMENT_ENABLE_TESTING</span></code>).</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">find_package</span><span class="p">(</span><span class="s">ament_lint_auto</span><span class="w"> </span><span class="s">REQUIRED</span><span class="p">)</span>
<span class="nb">ament_lint_auto_find_test_dependencies</span><span class="p">()</span>
</pre></div>
</div>
<p>También deberás agregar las siguientes dependencias a tu <code class="docutils literal notranslate"><span class="pre">package.xml</span></code>:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;test_depend&gt;</span>ament_lint_auto<span class="nt">&lt;/test_depend&gt;</span>
<span class="nt">&lt;test_depend&gt;</span>ament_lint_common<span class="nt">&lt;/test_depend&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="continuar-usando-catkin-en-cmake">
<h4>Continuar usando <code class="docutils literal notranslate"><span class="pre">catkin</span></code> en CMake<a class="headerlink" href="#continuar-usando-catkin-en-cmake" title="Enlazar permanentemente con este título"></a></h4>
<p>ROS 2 usa ament como sistema de compilación, pero por compatibilidad con versiones anteriores, ROS 2 tiene un paquete llamado <code class="docutils literal notranslate"><span class="pre">catkin</span></code> que proporciona casi la misma API que catkin en ROS 1.
Para utilizar esta API de compatibilidad con versiones anteriores, <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> solo debe actualizarse para llamar a la función <code class="docutils literal notranslate"><span class="pre">catkin_ament_package()</span></code> <em>después</em> de todos los objetivos.</p>
<p><strong>NOTA: Esto aún no se ha implementado y es solo una idea por el momento.
Debido a la cantidad de cambios relacionados con las dependencias, aún no se ha decidido si esta API de compatibilidad es lo suficientemente útil como para justificar el esfuerzo.</strong></p>
</div>
</div>
<div class="section" id="actualizar-codigo-fuente">
<h3><a class="toc-backref" href="#id21">Actualizar código fuente</a><a class="headerlink" href="#actualizar-codigo-fuente" title="Enlazar permanentemente con este título"></a></h3>
<div class="section" id="mensajes-servicios-y-acciones">
<h4>Mensajes, servicios y acciones<a class="headerlink" href="#mensajes-servicios-y-acciones" title="Enlazar permanentemente con este título"></a></h4>
<p>El espacio de nombres de los mensajes, servicios y acciones de ROS 2 utiliza un subespacio de nombres (<code class="docutils literal notranslate"><span class="pre">msg</span></code>, <code class="docutils literal notranslate"><span class="pre">srv</span></code> o <code class="docutils literal notranslate"><span class="pre">action</span></code>, respectivamente) después del nombre del paquete.
Por lo tanto, una inclusión se parece a: <code class="docutils literal notranslate"><span class="pre">#include</span> <span class="pre">&lt;my_interfaces/msg/my_message.hpp&gt;</span></code>.
El tipo de C++ entonces se llama: <code class="docutils literal notranslate"><span class="pre">my_interfaces::msg::MyMessage</span></code>.</p>
<p>Los tipos de punteros compartidos se proporcionan como typedefs dentro de las estructuras del mensaje: <code class="docutils literal notranslate"><span class="pre">my_interfaces::msg::MyMessage::SharedPtr</span></code> así como <code class="docutils literal notranslate"><span class="pre">my_interfaces::msg::MyMessage::ConstSharedPtr</span></code>.</p>
<p>Para obtener más detalles, Consulta el artículo sobre <a class="reference external" href="https://design.ros2.org/articles/generated_interfaces_cpp.html">interfaces C++ generadas</a>.</p>
<p>La migración requiere incluir cambios :</p>
<ul class="simple">
<li><p>insertar la subcarpeta <code class="docutils literal notranslate"><span class="pre">msg</span></code> entre el nombre del paquete y el tipo de datos del mensaje</p></li>
<li><p>cambiar el nombre de archivo incluido de CamelCase a la separación de guión bajo</p></li>
<li><p>cambiar de <code class="docutils literal notranslate"><span class="pre">*.h</span></code> a <code class="docutils literal notranslate"><span class="pre">*.hpp</span></code></p></li>
</ul>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// ROS 1 style is in comments, ROS 2 follows, uncommented.</span>
<span class="c1">// # include &lt;geometry_msgs/PointStamped.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;geometry_msgs/msg/point_stamped.hpp&gt;</span><span class="cp"></span>

<span class="c1">// geometry_msgs::PointStamped point_stamped;</span>
<span class="n">geometry_msgs</span><span class="o">::</span><span class="n">msg</span><span class="o">::</span><span class="n">PointStamped</span><span class="w"> </span><span class="n">point_stamped</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>La migración requiere código para insertar el espacio de nombres <code class="docutils literal notranslate"><span class="pre">msg</span></code> en todas las instancias.</p>
</div>
<div class="section" id="uso-de-objetos-de-servicio">
<h4>Uso de objetos de servicio<a class="headerlink" href="#uso-de-objetos-de-servicio" title="Enlazar permanentemente con este título"></a></h4>
<p>Las devoluciones de llamada de servicio en ROS 2 no tienen valores de retorno booleanos.
En lugar de devolver falso en caso de fallas, se recomienda lanzar excepciones.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// ROS 1 style is in comments, ROS 2 follows, uncommented.</span>
<span class="c1">// #include &quot;nav_msgs/GetMap.h&quot;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;nav_msgs/srv/get_map.hpp&quot;</span><span class="cp"></span>

<span class="c1">// bool service_callback(</span>
<span class="c1">//   nav_msgs::GetMap::Request &amp; request,</span>
<span class="c1">//   nav_msgs::GetMap::Response &amp; response)</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">service_callback</span><span class="p">(</span><span class="w"></span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">nav_msgs</span><span class="o">::</span><span class="n">srv</span><span class="o">::</span><span class="n">GetMap</span><span class="o">::</span><span class="n">Request</span><span class="o">&gt;</span><span class="w"> </span><span class="n">request</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">nav_msgs</span><span class="o">::</span><span class="n">srv</span><span class="o">::</span><span class="n">GetMap</span><span class="o">::</span><span class="n">Response</span><span class="o">&gt;</span><span class="w"> </span><span class="n">response</span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="c1">// ...</span>
<span class="w">  </span><span class="c1">// return true;  // or false for failure</span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="usos-de-ros-time">
<h4>Usos de ros::Time<a class="headerlink" href="#usos-de-ros-time" title="Enlazar permanentemente con este título"></a></h4>
<p>Para usos de <code class="docutils literal notranslate"><span class="pre">ros::Time</span></code>:</p>
<ul>
<li><p>Remplaza todas las instancias de <code class="docutils literal notranslate"><span class="pre">ros::Time</span></code> con <code class="docutils literal notranslate"><span class="pre">rclcpp::Time</span></code></p></li>
<li><p>Si tus mensajes o código utilizan std_msgs::Time:</p>
<blockquote>
<div><ul class="simple">
<li><p>Convierte todas las instancias de std_msgs::Time a builtin_interfaces::msg::Time</p></li>
<li><p>Convierte todo <code class="docutils literal notranslate"><span class="pre">#include</span> <span class="pre">&quot;std_msgs/time.h</span></code> a <code class="docutils literal notranslate"><span class="pre">#include</span> <span class="pre">&quot;builtin_interfaces/msg/time.hpp&quot;</span></code></p></li>
<li><p>Convierte todas las instancias usando el campo std_msgs::Time <code class="docutils literal notranslate"><span class="pre">nsec</span></code> al campo builtin_interfaces::msg::Time <code class="docutils literal notranslate"><span class="pre">nanosec</span></code></p></li>
</ul>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="usos-de-ros-rate">
<h4>Usos de ros::Rate<a class="headerlink" href="#usos-de-ros-rate" title="Enlazar permanentemente con este título"></a></h4>
<p>Hay un objeto de tipo equivalente <code class="docutils literal notranslate"><span class="pre">rclcpp::Rate</span></code> que es básicamente un reemplazo directo para <code class="docutils literal notranslate"><span class="pre">ros::Rate</span></code>.</p>
</div>
<div class="section" id="biblioteca-de-cliente-ros">
<h4>Biblioteca de cliente ROS<a class="headerlink" href="#biblioteca-de-cliente-ros" title="Enlazar permanentemente con este título"></a></h4>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="Migration-Guide-Python.html">Guía de Python sobre migración desde ROS1</a></li>
</ul>
</div>
<p><strong>NOTA: Otros por escribir</strong></p>
</div>
<div class="section" id="boost">
<h4>Boost<a class="headerlink" href="#boost" title="Enlazar permanentemente con este título"></a></h4>
<p>Gran parte de la funcionalidad proporcionada anteriormente por Boost se ha integrado en la biblioteca estándar de C++.
Como tal, nos gustaría aprovechar las nuevas funciones principales y evitar la dependencia de Boost cuando sea posible.</p>
<div class="section" id="punteros-compartidos">
<h5>Punteros compartidos<a class="headerlink" href="#punteros-compartidos" title="Enlazar permanentemente con este título"></a></h5>
<p>Para cambiar los punteros compartidos de boost a C++ estándar, Remplaza las instancias de:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">#incluye</span> <span class="pre">&lt;boost/shared_ptr.hpp&gt;</span></code> con <code class="docutils literal notranslate"><span class="pre">#include</span> <span class="pre">&lt;memory&gt;`</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">boost::shared_ptr</span></code> con <code class="docutils literal notranslate"><span class="pre">std::shared_ptr</span></code></p></li>
</ul>
<p>También puede haber variantes como <code class="docutils literal notranslate"><span class="pre">weak_ptr</span></code> que también desees convertir.</p>
<p>También se recomienda como práctica usar <code class="docutils literal notranslate"><span class="pre">using</span></code> en lugar de <code class="docutils literal notranslate"><span class="pre">typedef</span></code>.
<code class="docutils literal notranslate"><span class="pre">using</span></code> tiene la capacidad de funcionar mejor en lógica con plantilla.
Para obtener detalles <a class="reference external" href="https://stackoverflow.com/questions/10747810/what-is-the-difference-between-typedef-and-using-in-c11">ver aquí</a></p>
</div>
<div class="section" id="hilos-mutexes">
<h5>Hilos/Mutexes<a class="headerlink" href="#hilos-mutexes" title="Enlazar permanentemente con este título"></a></h5>
<p>Otra parte común de boost que se usa en las bases de código de ROS son los mutexes en <code class="docutils literal notranslate"><span class="pre">boost::thread</span></code>.</p>
<ul class="simple">
<li><p>Reemplaza <code class="docutils literal notranslate"><span class="pre">boost::mutex::scoped_lock</span></code> con <code class="docutils literal notranslate"><span class="pre">std::unique_lock&lt;std::mutex&gt;</span></code></p></li>
<li><p>Remplaza <code class="docutils literal notranslate"><span class="pre">boost::mutex</span></code> con <code class="docutils literal notranslate"><span class="pre">std::mutex</span></code></p></li>
<li><p>Remplaza <code class="docutils literal notranslate"><span class="pre">#include</span> <span class="pre">&lt;boost/thread/mutex.hpp&gt;</span></code> con <code class="docutils literal notranslate"><span class="pre">#include</span> <span class="pre">&lt;mutex&gt;</span></code></p></li>
</ul>
</div>
<div class="section" id="mapa-desordenado">
<h5>Mapa desordenado<a class="headerlink" href="#mapa-desordenado" title="Enlazar permanentemente con este título"></a></h5>
<p>Reemplazar:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">#include</span> <span class="pre">&lt;boost/unordered_map.hpp&gt;</span></code> con <code class="docutils literal notranslate"><span class="pre">#include</span> <span class="pre">&lt;unordered_map&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">boost::unordered_map</span></code> con <code class="docutils literal notranslate"><span class="pre">std::unordered_map</span></code></p></li>
</ul>
</div>
<div class="section" id="funcion">
<h5>función<a class="headerlink" href="#funcion" title="Enlazar permanentemente con este título"></a></h5>
<p>Reemplazar:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">#include</span> <span class="pre">&lt;boost/function.hpp&gt;</span></code> con <code class="docutils literal notranslate"><span class="pre">#include</span> <span class="pre">&lt;funcional&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">boost::function</span></code> con <code class="docutils literal notranslate"><span class="pre">std::function</span></code></p></li>
</ul>
</div>
</div>
</div>
</div>
<div class="section" id="parametros">
<h2><a class="toc-backref" href="#id8">Parámetros</a><a class="headerlink" href="#parametros" title="Enlazar permanentemente con este título"></a></h2>
<p>En ROS 1, los parámetros están asociados con un servidor central que permitía recuperar parámetros en tiempo de ejecución mediante el uso de las API de la red.
En ROS 2, los parámetros están asociados por nodo y son configurables en tiempo de ejecución con los servicios de ROS.</p>
<ul class="simple">
<li><p>Consulta el documento de diseño de parámetros <a class="reference external" href="https://design.ros2.org/articles/ros_parameters.html">ROS 2</a> para obtener más detalles sobre el modelo del sistema.</p></li>
<li><p>Consulta <a class="reference internal" href="../../Tutorials/Beginner-CLI-Tools/Understanding-ROS2-Parameters/Understanding-ROS2-Parameters.html"><span class="doc">Uso de la CLI de ROS 2</span></a> para comprender mejor cómo funcionan las herramientas de la CLI y sus diferencias con el utillaje ROS 1.</p></li>
<li><p>Consulta <a class="reference internal" href="../../How-To-Guides/Parameters-YAML-files-migration-guide.html"><span class="doc">Migrating YAML parameter files from ROS 1 to ROS 2</span></a> para ver cómo se analizan los archivos de parámetros YAML en ROS 2 y sus diferencias con la implementación de ROS.</p></li>
</ul>
</div>
<div class="section" id="iniciar-archivos">
<h2><a class="toc-backref" href="#id9">Iniciar archivos</a><a class="headerlink" href="#iniciar-archivos" title="Enlazar permanentemente con este título"></a></h2>
<p>Mientras que los archivos de lanzamiento en ROS 1 siempre se especifican usando archivos <a class="reference external" href="https://wiki.ros.org/roslaunch/XML">.xml</a>, ROS 2 admite scripts de Python para permitir una mayor flexibilidad (Consulta <a class="reference external" href="https://github.com/ros2/launch/tree/rolling/launch">paquete de lanzamiento</a>), así como archivos XML y YAML.
Consulta el <a class="reference internal" href="../../How-To-Guides/Launch-files-migration-guide.html"><span class="doc">tutorial</span></a> sobre la migración de archivos de inicio de ROS 1 a ROS 2.</p>
</div>
<div class="section" id="ejemplo-convertir-un-paquete-ros-1-existente-para-usar-ros-2">
<h2><a class="toc-backref" href="#id10">Ejemplo: convertir un paquete ROS 1 existente para usar ROS 2</a><a class="headerlink" href="#ejemplo-convertir-un-paquete-ros-1-existente-para-usar-ros-2" title="Enlazar permanentemente con este título"></a></h2>
<p>Digamos que tenemos un paquete ROS 1 simple llamado <code class="docutils literal notranslate"><span class="pre">talker</span></code> que usa <code class="docutils literal notranslate"><span class="pre">roscpp</span></code>
en un nodo, llamado <code class="docutils literal notranslate"><span class="pre">talker</span></code>.
Este paquete está en un espacio de trabajo catkin, ubicado en <code class="docutils literal notranslate"><span class="pre">~/ros1_talker</span></code>.</p>
<div class="section" id="el-codigo-ros-1">
<h3><a class="toc-backref" href="#id11">El código ROS 1</a><a class="headerlink" href="#el-codigo-ros-1" title="Enlazar permanentemente con este título"></a></h3>
<p>Aquí está el diseño del directorio de nuestro espacio de trabajo catkin:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> ~/ros1_talker
$ find .
.
./src
./src/talker
./src/talker/package.xml
./src/talker/CMakeLists.txt
./src/talker/talker.cpp
</pre></div>
</div>
<p>Aquí está el contenido de esos tres archivos:</p>
<p><code class="docutils literal notranslate"><span class="pre">src/talker/package.xml</span></code>:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;package&gt;</span>
  <span class="nt">&lt;name&gt;</span>talker<span class="nt">&lt;/name&gt;</span>
  <span class="nt">&lt;version&gt;</span>0.0.0<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;description&gt;</span>talker<span class="nt">&lt;/description&gt;</span>
  <span class="nt">&lt;maintainer</span> <span class="na">email=</span><span class="s">&quot;gerkey@osrfoundation.org&quot;</span><span class="nt">&gt;</span>Brian Gerkey<span class="nt">&lt;/maintainer&gt;</span>
  <span class="nt">&lt;license&gt;</span>Apache 2.0<span class="nt">&lt;/license&gt;</span>
  <span class="nt">&lt;buildtool_depend&gt;</span>catkin<span class="nt">&lt;/buildtool_depend&gt;</span>
  <span class="nt">&lt;build_depend&gt;</span>roscpp<span class="nt">&lt;/build_depend&gt;</span>
  <span class="nt">&lt;build_depend&gt;</span>std_msgs<span class="nt">&lt;/build_depend&gt;</span>
  <span class="nt">&lt;run_depend&gt;</span>roscpp<span class="nt">&lt;/run_depend&gt;</span>
  <span class="nt">&lt;run_depend&gt;</span>std_msgs<span class="nt">&lt;/run_depend&gt;</span>
<span class="nt">&lt;/package&gt;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">src/talker/CMakeLists.txt</span></code>:</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">cmake_minimum_required</span><span class="p">(</span><span class="s">VERSION</span><span class="w"> </span><span class="s">2.8.3</span><span class="p">)</span>
<span class="nb">project</span><span class="p">(</span><span class="s">talker</span><span class="p">)</span>
<span class="nb">find_package</span><span class="p">(</span><span class="s">catkin</span><span class="w"> </span><span class="s">REQUIRED</span><span class="w"> </span><span class="s">COMPONENTS</span><span class="w"> </span><span class="s">roscpp</span><span class="w"> </span><span class="s">std_msgs</span><span class="p">)</span>
<span class="nb">catkin_package</span><span class="p">()</span>
<span class="nb">include_directories</span><span class="p">(</span><span class="o">${</span><span class="nv">catkin_INCLUDE_DIRS</span><span class="o">}</span><span class="p">)</span>
<span class="nb">add_executable</span><span class="p">(</span><span class="s">talker</span><span class="w"> </span><span class="s">talker.cpp</span><span class="p">)</span>
<span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">talker</span><span class="w"> </span><span class="o">${</span><span class="nv">catkin_LIBRARIES</span><span class="o">}</span><span class="p">)</span>
<span class="nb">install</span><span class="p">(</span><span class="s">TARGETS</span><span class="w"> </span><span class="s">talker</span>
<span class="w">  </span><span class="s">RUNTIME</span><span class="w"> </span><span class="s">DESTINATION</span><span class="w"> </span><span class="o">${</span><span class="nv">CATKIN_PACKAGE_BIN_DESTINATION</span><span class="o">}</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">src/talker/talker.cpp</span></code>:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sstream&gt;</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;ros/ros.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;std_msgs/String.h&quot;</span><span class="cp"></span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">**</span><span class="n">argv</span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="n">ros</span><span class="o">::</span><span class="n">init</span><span class="p">(</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;talker&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="n">ros</span><span class="o">::</span><span class="n">NodeHandle</span><span class="w"> </span><span class="n">n</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="n">ros</span><span class="o">::</span><span class="n">Publisher</span><span class="w"> </span><span class="n">chatter_pub</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n</span><span class="p">.</span><span class="n">advertise</span><span class="o">&lt;</span><span class="n">std_msgs</span><span class="o">::</span><span class="n">String</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;chatter&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">1000</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="n">ros</span><span class="o">::</span><span class="n">Rate</span><span class="w"> </span><span class="n">loop_rate</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="n">std_msgs</span><span class="o">::</span><span class="n">String</span><span class="w"> </span><span class="n">msg</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">ros</span><span class="o">::</span><span class="n">ok</span><span class="p">())</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">stringstream</span><span class="w"> </span><span class="n">ss</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">ss</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;hello world &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">count</span><span class="o">++</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">msg</span><span class="p">.</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ss</span><span class="p">.</span><span class="n">str</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="n">ROS_INFO</span><span class="p">(</span><span class="s">&quot;%s&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">msg</span><span class="p">.</span><span class="n">data</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span><span class="w"></span>
<span class="w">    </span><span class="n">chatter_pub</span><span class="p">.</span><span class="n">publish</span><span class="p">(</span><span class="n">msg</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">ros</span><span class="o">::</span><span class="n">spinOnce</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="n">loop_rate</span><span class="p">.</span><span class="n">sleep</span><span class="p">();</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<div class="section" id="construyendo-el-codigo-ros-1">
<h4>Construyendo el código ROS 1<a class="headerlink" href="#construyendo-el-codigo-ros-1" title="Enlazar permanentemente con este título"></a></h4>
<p>Obtenemos un archivo de configuración del entorno (en este caso para Jade usando bash), luego
construimos nuestro paquete usando <code class="docutils literal notranslate"><span class="pre">catkin_make</span> <span class="pre">install</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>. /opt/ros/jade/setup.bash
<span class="nb">cd</span> ~/ros1_talker
catkin_make install
</pre></div>
</div>
</div>
<div class="section" id="ejecutando-el-nodo-ros-1">
<h4>Ejecutando el nodo ROS 1<a class="headerlink" href="#ejecutando-el-nodo-ros-1" title="Enlazar permanentemente con este título"></a></h4>
<p>Si aún no hay uno ejecutándose, comenzamos un <code class="docutils literal notranslate"><span class="pre">roscore</span></code>, primero buscando el
archivo de instalación de nuestro árbol de instalación <code class="docutils literal notranslate"><span class="pre">catkin</span></code> (el archivo de instalación del sistema en
<code class="docutils literal notranslate"><span class="pre">/opt/ros/jade/setup.bash</span></code> también funcionaría aquí):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>. ~/ros1_talker/install/setup.bash
roscore
</pre></div>
</div>
<p>En otro shell, ejecutamos el nodo desde el espacio de instalación <code class="docutils literal notranslate"><span class="pre">catkin</span></code> usando
<code class="docutils literal notranslate"><span class="pre">rosrun</span></code>, de nuevo obteniendo primero el archivo de instalación (en este caso debe ser el que
desde nuestro espacio de trabajo):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>. ~/ros1_talker/install/setup.bash
rosrun talker talker
</pre></div>
</div>
</div>
</div>
<div class="section" id="migracion-a-ros-2">
<h3><a class="toc-backref" href="#id12">Migración a ROS 2</a><a class="headerlink" href="#migracion-a-ros-2" title="Enlazar permanentemente con este título"></a></h3>
<p>Comencemos por crear un nuevo espacio de trabajo en el que trabajar:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir ~/ros2_talker
<span class="nb">cd</span> ~/ros2_talker
</pre></div>
</div>
<p>Copiaremos el árbol fuente de nuestro paquete ROS 1 en ese espacio de trabajo, donde podemos modificarlo:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir src
cp -a ~/ros1_talker/src/talker src
</pre></div>
</div>
<p>Ahora modificaremos el código C++ en el nodo.
La biblioteca ROS 2 C++, llamada <code class="docutils literal notranslate"><span class="pre">rclcpp</span></code>, proporciona una API diferente a esa
proporcionada por <code class="docutils literal notranslate"><span class="pre">roscpp</span></code>.
Los conceptos son muy similares entre las dos bibliotecas, lo que hace que los cambios
sean razonablemente fáciles de hacer.</p>
<div class="section" id="encabezados-incluidos">
<h4>Encabezados incluidos<a class="headerlink" href="#encabezados-incluidos" title="Enlazar permanentemente con este título"></a></h4>
<p>En lugar de <code class="docutils literal notranslate"><span class="pre">ros/ros.h</span></code>, que nos daba acceso a la API de la biblioteca <code class="docutils literal notranslate"><span class="pre">roscpp</span></code>,
necesitamos incluir <code class="docutils literal notranslate"><span class="pre">rclcpp/rclcpp.hpp</span></code>, que nos da acceso a <code class="docutils literal notranslate"><span class="pre">rclcpp</span></code>
API de la biblioteca:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">//#include &quot;ros/ros.h&quot;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;rclcpp/rclcpp.hpp&quot;</span><span class="cp"></span>
</pre></div>
</div>
<p>Para obtener la definición de mensaje <code class="docutils literal notranslate"><span class="pre">std_msgs/String</span></code>, en lugar de
<code class="docutils literal notranslate"><span class="pre">std_msgs/String.h</span></code>, necesitamos incluir <code class="docutils literal notranslate"><span class="pre">std_msgs/msg/string.hpp</span></code>:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">//#include &quot;std_msgs/String.h&quot;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;std_msgs/msg/string.hpp&quot;</span><span class="cp"></span>
</pre></div>
</div>
</div>
<div class="section" id="cambiar-las-llamadas-a-la-biblioteca-de-c">
<h4>Cambiar las llamadas a la biblioteca de C++<a class="headerlink" href="#cambiar-las-llamadas-a-la-biblioteca-de-c" title="Enlazar permanentemente con este título"></a></h4>
<p>En lugar de pasar el nombre del nodo a la llamada de inicialización de la biblioteca, hacemos
la inicialización, luego pasamos el nombre del nodo a la creación del objeto del nodo
(Podemos usar la palabra clave <code class="docutils literal notranslate"><span class="pre">auto</span></code> porque ahora se requiere un compilador C++14):</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">//  ros::init(argc, argv, &quot;talker&quot;);</span>
<span class="c1">//  ros::NodeHandle n;</span>
<span class="w">    </span><span class="n">rclcpp</span><span class="o">::</span><span class="n">init</span><span class="p">(</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rclcpp</span><span class="o">::</span><span class="n">Node</span><span class="o">::</span><span class="n">make_shared</span><span class="p">(</span><span class="s">&quot;talker&quot;</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>La creación de los objetos publisher y rate es bastante similar, con algunos
cambios en los nombres de espacio de nombres y métodos.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">//  ros::Publisher chatter_pub = n.advertise&lt;std_msgs::String&gt;(&quot;chatter&quot;, 1000);</span>
<span class="c1">//  ros::Rate loop_rate(10);</span>
<span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">chatter_pub</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">node</span><span class="o">-&gt;</span><span class="n">create_publisher</span><span class="o">&lt;</span><span class="n">std_msgs</span><span class="o">::</span><span class="n">msg</span><span class="o">::</span><span class="n">String</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;chatter&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="mi">1000</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="n">rclcpp</span><span class="o">::</span><span class="n">Rate</span><span class="w"> </span><span class="nf">loop_rate</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>Para controlar aún más cómo se maneja la entrega de mensajes, se podría pasar
un perfil de calidad de servicio(<code class="docutils literal notranslate"><span class="pre">QoS</span></code>) .
El perfil predeterminado es <code class="docutils literal notranslate"><span class="pre">rmw_qos_profile_default</span></code>.
Para obtener más detalles, Consulta el
<a class="reference external" href="https://design.ros2.org/articles/qos.html">documento de diseño</a>
y <a class="reference internal" href="../../Concepts/About-Quality-of-Service-Settings.html"><span class="doc">descripción general del concepto</span></a>.</p>
<p>La creación del mensaje saliente es diferente en el ename space:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">//  std_msgs::String msg;</span>
<span class="w">  </span><span class="n">std_msgs</span><span class="o">::</span><span class="n">msg</span><span class="o">::</span><span class="n">String</span><span class="w"> </span><span class="n">msg</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>En lugar de <code class="docutils literal notranslate"><span class="pre">ros::ok()</span></code>, llamamos <code class="docutils literal notranslate"><span class="pre">rclcpp::ok()</span></code>:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">//  while (ros::ok())</span>
<span class="w">  </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">rclcpp</span><span class="o">::</span><span class="n">ok</span><span class="p">())</span><span class="w"></span>
</pre></div>
</div>
<p>Dentro del ciclo de publicación, accedemos al campo <code class="docutils literal notranslate"><span class="pre">datos</span></code> como antes:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">msg</span><span class="p">.</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ss</span><span class="p">.</span><span class="n">str</span><span class="p">();</span><span class="w"></span>
</pre></div>
</div>
<p>Para imprimir un mensaje de consola, en lugar de usar <code class="docutils literal notranslate"><span class="pre">ROS_INFO()</span></code>, usamos
<code class="docutils literal notranslate"><span class="pre">RCLCPP_INFO()</span></code> y sus varios primos.
La diferencia clave es que <code class="docutils literal notranslate"><span class="pre">RCLCPP_INFO()</span></code> toma un objeto Logger como el primero
argumento.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">//    ROS_INFO(&quot;%s&quot;, msg.data.c_str());</span>
<span class="w">    </span><span class="n">RCLCPP_INFO</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">get_logger</span><span class="p">(),</span><span class="w"> </span><span class="s">&quot;%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">msg</span><span class="p">.</span><span class="n">data</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span><span class="w"></span>
</pre></div>
</div>
<p>Publicar el mensaje es igual que antes:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">chatter_pub</span><span class="o">-&gt;</span><span class="n">publish</span><span class="p">(</span><span class="n">msg</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>Spinning (es decir, dejar que el sistema de comunicaciones procese cualquier
mensajes entrantes/salientes) es diferente en que la llamada ahora toma el nodo como
un argumento:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">//    ros::spinOnce();</span>
<span class="w">    </span><span class="n">rclcpp</span><span class="o">::</span><span class="n">spin_some</span><span class="p">(</span><span class="n">node</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>Dormir usando el objeto de tarifa no cambia.</p>
<p>Poniéndolo todo junto, el nuevo <code class="docutils literal notranslate"><span class="pre">talker.cpp</span></code> se ve así:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sstream&gt;</span><span class="cp"></span>
<span class="c1">// #include &quot;ros/ros.h&quot;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;rclcpp/rclcpp.hpp&quot;</span><span class="cp"></span>
<span class="c1">// #include &quot;std_msgs/String.h&quot;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;std_msgs/msg/string.hpp&quot;</span><span class="cp"></span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">**</span><span class="n">argv</span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="c1">//  ros::init(argc, argv, &quot;talker&quot;);</span>
<span class="c1">//  ros::NodeHandle n;</span>
<span class="w">  </span><span class="n">rclcpp</span><span class="o">::</span><span class="n">init</span><span class="p">(</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rclcpp</span><span class="o">::</span><span class="n">Node</span><span class="o">::</span><span class="n">make_shared</span><span class="p">(</span><span class="s">&quot;talker&quot;</span><span class="p">);</span><span class="w"></span>
<span class="c1">//  ros::Publisher chatter_pub = n.advertise&lt;std_msgs::String&gt;(&quot;chatter&quot;, 1000);</span>
<span class="c1">//  ros::Rate loop_rate(10);</span>
<span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">chatter_pub</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">node</span><span class="o">-&gt;</span><span class="n">create_publisher</span><span class="o">&lt;</span><span class="n">std_msgs</span><span class="o">::</span><span class="n">msg</span><span class="o">::</span><span class="n">String</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;chatter&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">1000</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="n">rclcpp</span><span class="o">::</span><span class="n">Rate</span><span class="w"> </span><span class="n">loop_rate</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="c1">//  std_msgs::String msg;</span>
<span class="w">  </span><span class="n">std_msgs</span><span class="o">::</span><span class="n">msg</span><span class="o">::</span><span class="n">String</span><span class="w"> </span><span class="n">msg</span><span class="p">;</span><span class="w"></span>
<span class="c1">//  while (ros::ok())</span>
<span class="w">  </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">rclcpp</span><span class="o">::</span><span class="n">ok</span><span class="p">())</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">stringstream</span><span class="w"> </span><span class="n">ss</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">ss</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;hello world &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">count</span><span class="o">++</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">msg</span><span class="p">.</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ss</span><span class="p">.</span><span class="n">str</span><span class="p">();</span><span class="w"></span>
<span class="c1">//    ROS_INFO(&quot;%s&quot;, msg.data.c_str());</span>
<span class="w">    </span><span class="n">RCLCPP_INFO</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">get_logger</span><span class="p">(),</span><span class="w"> </span><span class="s">&quot;%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">msg</span><span class="p">.</span><span class="n">data</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span><span class="w"></span>
<span class="w">    </span><span class="n">chatter_pub</span><span class="o">-&gt;</span><span class="n">publish</span><span class="p">(</span><span class="n">msg</span><span class="p">);</span><span class="w"></span>
<span class="c1">//    ros::spinOnce();</span>
<span class="w">    </span><span class="n">rclcpp</span><span class="o">::</span><span class="n">spin_some</span><span class="p">(</span><span class="n">node</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">loop_rate</span><span class="p">.</span><span class="n">sleep</span><span class="p">();</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="cambiando-el-package-xml">
<h4>Cambiando el <code class="docutils literal notranslate"><span class="pre">package.xml</span></code><a class="headerlink" href="#cambiando-el-package-xml" title="Enlazar permanentemente con este título"></a></h4>
<p>ROS 2 no admite el formato 1 de la especificación del paquete, sino solo las versiones de formato más nuevas (2 y superiores).
Empezamos especificando la versión del formato en la etiqueta <code class="docutils literal notranslate"><span class="pre">package</span></code>:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cm">&lt;!-- &lt;package&gt; --&gt;</span>
<span class="nt">&lt;package</span> <span class="na">format=</span><span class="s">&quot;2&quot;</span><span class="nt">&gt;</span>
</pre></div>
</div>
<p>ROS 2 usa una versión más nueva de <code class="docutils literal notranslate"><span class="pre">catkin</span></code>, llamada <code class="docutils literal notranslate"><span class="pre">ament_cmake</span></code>, que especificamos en la
etiqueta <code class="docutils literal notranslate"><span class="pre">buildtool_depend</span></code>:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cm">&lt;!--  &lt;buildtool_depend&gt;catkin&lt;/buildtool_depend&gt; --&gt;</span>
  <span class="nt">&lt;buildtool_depend&gt;</span>ament_cmake<span class="nt">&lt;/buildtool_depend&gt;</span>
</pre></div>
</div>
<p>En nuestras dependencias de compilación, en lugar de <code class="docutils literal notranslate"><span class="pre">roscpp</span></code> usamos <code class="docutils literal notranslate"><span class="pre">rclcpp</span></code>, que proporciona
la API de C++ que usamos.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cm">&lt;!--  &lt;build_depend&gt;roscpp&lt;/build_depend&gt; --&gt;</span>
  <span class="nt">&lt;build_depend&gt;</span>rclcpp<span class="nt">&lt;/build_depend&gt;</span>
</pre></div>
</div>
<p>Hacemos la misma adición en las dependencias de ejecución y también actualizamos desde el
etiqueta <code class="docutils literal notranslate"><span class="pre">run_depend</span></code> a la etiqueta <code class="docutils literal notranslate"><span class="pre">exec_depend</span></code> (parte de la actualización a la versión 2 de
el formato del paquete):</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cm">&lt;!--  &lt;run_depend&gt;roscpp&lt;/run_depend&gt; --&gt;</span>
  <span class="nt">&lt;exec_depend&gt;</span>rclcpp<span class="nt">&lt;/exec_depend&gt;</span>
<span class="cm">&lt;!--  &lt;run_depend&gt;std_msgs&lt;/run_depend&gt; --&gt;</span>
  <span class="nt">&lt;exec_depend&gt;</span>std_msgs<span class="nt">&lt;/exec_depend&gt;</span>
</pre></div>
</div>
<p>En ROS 1, usamos <code class="docutils literal notranslate"><span class="pre">&lt;depend&gt;</span></code> para simplificar la especificación de dependencias para ambos
tiempo de compilación y tiempo de ejecución.
Podemos hacer lo mismo en ROS 2:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;depend&gt;</span>rclcpp<span class="nt">&lt;/depend&gt;</span>
<span class="nt">&lt;depend&gt;</span>std_msgs<span class="nt">&lt;/depend&gt;</span>
</pre></div>
</div>
<p>También necesitamos decirle a la herramienta de compilación qué <em>tipo</em> de paquete somos, para que sepa cómo
construirnos.
Debido a que estamos usando <code class="docutils literal notranslate"><span class="pre">ament</span></code> y CMake, agregamos las siguientes líneas para declarar nuestro
tipo de compilación para ser <code class="docutils literal notranslate"><span class="pre">ament_cmake</span></code>:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;export&gt;</span>
  <span class="nt">&lt;build_type&gt;</span>ament_cmake<span class="nt">&lt;/build_type&gt;</span>
<span class="nt">&lt;/export&gt;</span>
</pre></div>
</div>
<p>Poniéndolo todo junto, nuestro <code class="docutils literal notranslate"><span class="pre">package.xml</span></code> ahora se ve así:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cm">&lt;!-- &lt;package&gt; --&gt;</span>
<span class="nt">&lt;package</span> <span class="na">format=</span><span class="s">&quot;2&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;name&gt;</span>talker<span class="nt">&lt;/name&gt;</span>
  <span class="nt">&lt;version&gt;</span>0.0.0<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;description&gt;</span>talker<span class="nt">&lt;/description&gt;</span>
  <span class="nt">&lt;maintainer</span> <span class="na">email=</span><span class="s">&quot;gerkey@osrfoundation.org&quot;</span><span class="nt">&gt;</span>Brian Gerkey<span class="nt">&lt;/maintainer&gt;</span>
  <span class="nt">&lt;license&gt;</span>Apache License 2.0<span class="nt">&lt;/license&gt;</span>
<span class="cm">&lt;!--  &lt;buildtool_depend&gt;catkin&lt;/buildtool_depend&gt; --&gt;</span>
  <span class="nt">&lt;buildtool_depend&gt;</span>ament_cmake<span class="nt">&lt;/buildtool_depend&gt;</span>
<span class="cm">&lt;!--  &lt;build_depend&gt;roscpp&lt;/build_depend&gt; --&gt;</span>
<span class="cm">&lt;!--  &lt;run_depend&gt;roscpp&lt;/run_depend&gt; --&gt;</span>
<span class="cm">&lt;!--  &lt;run_depend&gt;std_msgs&lt;/run_depend&gt; --&gt;</span>
  <span class="nt">&lt;depend&gt;</span>rclcpp<span class="nt">&lt;/depend&gt;</span>
  <span class="nt">&lt;depend&gt;</span>std_msgs<span class="nt">&lt;/depend&gt;</span>
  <span class="nt">&lt;export&gt;</span>
    <span class="nt">&lt;build_type&gt;</span>ament_cmake<span class="nt">&lt;/build_type&gt;</span>
  <span class="nt">&lt;/export&gt;</span>
<span class="nt">&lt;/package&gt;</span>
</pre></div>
</div>
<p><strong>POR HACER: muestra una versión más simple de este archivo simplemente usando la etiqueta ``&lt;depend&gt;``, que es
habilitado por la versión 2 del formato del paquete (también soportado en ``catkin`` así que,
estrictamente hablando, ortogonal a ROS 2).</strong></p>
</div>
<div class="section" id="cambiar-el-codigo-cmake">
<h4>Cambiar el código CMake<a class="headerlink" href="#cambiar-el-codigo-cmake" title="Enlazar permanentemente con este título"></a></h4>
<p>ROS 2 se basa en una versión superior de CMake:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1">#cmake_minimum_required(VERSION 2.8.3)</span>
cmake_minimum_required<span class="o">(</span>VERSION <span class="m">3</span>.5<span class="o">)</span>
</pre></div>
</div>
<p>ROS 2 se basa en el estándar C++14.
Según el compilador que esté usando, es posible que la compatibilidad con C++ 14 no esté habilitada
por defecto.
Usando <code class="docutils literal notranslate"><span class="pre">gcc</span></code> 5.3 (que es lo que se usa en Ubuntu Xenial), necesitamos habilitarlo
explícitamente, lo que hacemos agregando esta línea cerca de la parte superior del archivo:</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">set</span><span class="p">(</span><span class="s">CMAKE_CXX_STANDARD</span><span class="w"> </span><span class="s">14</span><span class="p">)</span>
</pre></div>
</div>
<p>La forma preferida de trabajar en todas las plataformas es esta:</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">if</span><span class="p">(</span><span class="s">NOT</span><span class="w"> </span><span class="s">CMAKE_CXX_STANDARD</span><span class="p">)</span>
<span class="w">  </span><span class="nb">set</span><span class="p">(</span><span class="s">CMAKE_CXX_STANDARD</span><span class="w"> </span><span class="s">14</span><span class="p">)</span>
<span class="nb">endif</span><span class="p">()</span>
<span class="nb">if</span><span class="p">(</span><span class="s">CMAKE_COMPILER_IS_GNUCXX</span><span class="w"> </span><span class="s">OR</span><span class="w"> </span><span class="s">CMAKE_CXX_COMPILER_ID</span><span class="w"> </span><span class="s">MATCHES</span><span class="w"> </span><span class="s2">&quot;Clang&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="nb">add_compile_options</span><span class="p">(</span><span class="s">-Wall</span><span class="w"> </span><span class="s">-Wextra</span><span class="w"> </span><span class="s">-Wpedantic</span><span class="p">)</span>
<span class="nb">endif</span><span class="p">()</span>
</pre></div>
</div>
<p>Usando <code class="docutils literal notranslate"><span class="pre">catkin</span></code>, especificamos los paquetes contra los que queremos construir pasándolos
como argumentos <code class="docutils literal notranslate"><span class="pre">COMPONENTS</span></code> al encontrar inicialmente <code class="docutils literal notranslate"><span class="pre">catkin</span></code>.
Con <code class="docutils literal notranslate"><span class="pre">ament_cmake</span></code>, encontramos cada paquete individualmente, comenzando con <code class="docutils literal notranslate"><span class="pre">ament_cmake</span></code>:</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="c">#find_package(catkin REQUIRED COMPONENTS roscpp std_msgs)</span>
<span class="nb">find_package</span><span class="p">(</span><span class="s">ament_cmake</span><span class="w"> </span><span class="s">REQUIRED</span><span class="p">)</span>
<span class="nb">find_package</span><span class="p">(</span><span class="s">rclcpp</span><span class="w"> </span><span class="s">REQUIRED</span><span class="p">)</span>
<span class="nb">find_package</span><span class="p">(</span><span class="s">std_msgs</span><span class="w"> </span><span class="s">REQUIRED</span><span class="p">)</span>
</pre></div>
</div>
<p>Las dependencias del sistema se pueden encontrar como antes:</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">find_package</span><span class="p">(</span><span class="s">Boost</span><span class="w"> </span><span class="s">REQUIRED</span><span class="w"> </span><span class="s">COMPONENTS</span><span class="w"> </span><span class="s">system</span><span class="w"> </span><span class="s">filesystem</span><span class="w"> </span><span class="s">thread</span><span class="p">)</span>
</pre></div>
</div>
<p>Llamamos a <code class="docutils literal notranslate"><span class="pre">catkin_package()</span></code> para autogenerar cosas como la configuración de CMake
archivos para otros paquetes que usan nuestro paquete.
Mientras que esa llamada ocurre <em>antes</em> de especificar objetivos para construir, ahora llamamos a la
<code class="docutils literal notranslate"><span class="pre">ament_package()</span></code> análogo <em>después</em> de los objetivos:</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="c"># catkin_package()</span>
<span class="c"># At the bottom of the file:</span>
<span class="nb">ament_package</span><span class="p">()</span>
</pre></div>
</div>
<p>Los únicos directorios que deben incluirse manualmente son los directorios locales
y dependencias que no son paquetes de ament:</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="c">#include_directories(${catkin_INCLUDE_DIRS})</span>
<span class="nb">include_directories</span><span class="p">(</span><span class="s">include</span><span class="w"> </span><span class="o">${</span><span class="nv">Boost_INCLUDE_DIRS</span><span class="o">}</span><span class="p">)</span>
</pre></div>
</div>
<p>Una mejor alternativa es especificar incluir directorios para cada objetivo
individualmente, en lugar de incluir todos los directorios para todos los objetivos:</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">target_include_directories</span><span class="p">(</span><span class="s">target</span><span class="w"> </span><span class="s">PUBLIC</span><span class="w"> </span><span class="s">include</span><span class="w"> </span><span class="o">${</span><span class="nv">Boost_INCLUDE_DIRS</span><span class="o">}</span><span class="p">)</span>
</pre></div>
</div>
<p>Similar a cómo encontramos cada paquete dependiente por separado, necesitamos vincular
cada uno al objetivo de compilación.
Para enlazar con paquetes dependientes que son paquetes complementarios, en lugar de usar
<code class="docutils literal notranslate"><span class="pre">target_link_libraries()</span></code>, <code class="docutils literal notranslate"><span class="pre">ament_target_dependencies()</span></code> es una forma más
concisa y más completa de manejar las banderas de compilación.
Maneja automáticamente tanto los directorios de inclusión definidos en
<code class="docutils literal notranslate"><span class="pre">_INCLUDE_DIRS</span></code> y bibliotecas de enlace definidas en <code class="docutils literal notranslate"><span class="pre">_LIBRARIES</span></code>.</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="c">#target_link_libraries(talker ${catkin_LIBRARIES})</span>
<span class="nb">ament_target_dependencies</span><span class="p">(</span><span class="s">talker</span>
<span class="w">  </span><span class="s">rclcpp</span>
<span class="w">  </span><span class="s">std_msgs</span><span class="p">)</span>
</pre></div>
</div>
<p>Para enlazar con paquetes que no son paquetes de ament, como dependencias del sistema
como <code class="docutils literal notranslate"><span class="pre">Boost</span></code>, o una biblioteca construida en el mismo <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code>, usa
<code class="docutils literal notranslate"><span class="pre">target_link_libraries()`</span></code>:</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">target</span><span class="w"> </span><span class="o">${</span><span class="nv">Boost_LIBRARIES</span><span class="o">}</span><span class="p">)</span>
</pre></div>
</div>
<p>Para la instalación, <code class="docutils literal notranslate"><span class="pre">catkin</span></code> define variables como <code class="docutils literal notranslate"><span class="pre">CATKIN_PACKAGE_BIN_DESTINATION</span></code>.
Con <code class="docutils literal notranslate"><span class="pre">ament_cmake</span></code>, solo damos una ruta relativa a la raíz de la instalación, como <code class="docutils literal notranslate"><span class="pre">bin</span></code>
para ejecutables:</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="c">#install(TARGETS talker</span>
<span class="c">#  RUNTIME DESTINATION ${CATKIN_PACKAGE_BIN_DESTINATION})</span>
<span class="nb">install</span><span class="p">(</span><span class="s">TARGETS</span><span class="w"> </span><span class="s">talker</span>
<span class="w">  </span><span class="s">DESTINATION</span><span class="w"> </span><span class="s">lib/</span><span class="o">${</span><span class="nv">PROJECT_NAME</span><span class="o">}</span><span class="p">)</span>
</pre></div>
</div>
<p>Opcionalmente, podemos instalar y exportar los directorios incluidos para paquetes posteriores:</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">install</span><span class="p">(</span><span class="s">DIRECTORY</span><span class="w"> </span><span class="s">include/</span>
<span class="w">  </span><span class="s">DESTINATION</span><span class="w"> </span><span class="s">include</span><span class="p">)</span>
<span class="nb">ament_export_include_directories</span><span class="p">(</span><span class="s">include</span><span class="p">)</span>
</pre></div>
</div>
<p>Opcionalmente, podemos exportar dependencias para paquetes posteriores:</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">ament_export_dependencies</span><span class="p">(</span><span class="s">std_msgs</span><span class="p">)</span>
</pre></div>
</div>
<p>Poniéndolo todo junto, el nuevo <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> se ve así:</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="c">#cmake_minimum_required(VERSION 2.8.3)</span>
<span class="nb">cmake_minimum_required</span><span class="p">(</span><span class="s">VERSION</span><span class="w"> </span><span class="s">3.5</span><span class="p">)</span>
<span class="nb">project</span><span class="p">(</span><span class="s">talker</span><span class="p">)</span>
<span class="nb">if</span><span class="p">(</span><span class="s">NOT</span><span class="w"> </span><span class="s">CMAKE_CXX_STANDARD</span><span class="p">)</span>
<span class="w">  </span><span class="nb">set</span><span class="p">(</span><span class="s">CMAKE_CXX_STANDARD</span><span class="w"> </span><span class="s">14</span><span class="p">)</span>
<span class="nb">endif</span><span class="p">()</span>
<span class="nb">if</span><span class="p">(</span><span class="s">CMAKE_COMPILER_IS_GNUCXX</span><span class="w"> </span><span class="s">OR</span><span class="w"> </span><span class="s">CMAKE_CXX_COMPILER_ID</span><span class="w"> </span><span class="s">MATCHES</span><span class="w"> </span><span class="s2">&quot;Clang&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="nb">add_compile_options</span><span class="p">(</span><span class="s">-Wall</span><span class="w"> </span><span class="s">-Wextra</span><span class="w"> </span><span class="s">-Wpedantic</span><span class="p">)</span>
<span class="nb">endif</span><span class="p">()</span>
<span class="c">#find_package(catkin REQUIRED COMPONENTS roscpp std_msgs)</span>
<span class="nb">find_package</span><span class="p">(</span><span class="s">ament_cmake</span><span class="w"> </span><span class="s">REQUIRED</span><span class="p">)</span>
<span class="nb">find_package</span><span class="p">(</span><span class="s">rclcpp</span><span class="w"> </span><span class="s">REQUIRED</span><span class="p">)</span>
<span class="nb">find_package</span><span class="p">(</span><span class="s">std_msgs</span><span class="w"> </span><span class="s">REQUIRED</span><span class="p">)</span>
<span class="c">#catkin_package()</span>
<span class="c">#include_directories(${catkin_INCLUDE_DIRS})</span>
<span class="nb">include_directories</span><span class="p">(</span><span class="s">include</span><span class="p">)</span>
<span class="nb">add_executable</span><span class="p">(</span><span class="s">talker</span><span class="w"> </span><span class="s">talker.cpp</span><span class="p">)</span>
<span class="c">#target_link_libraries(talker ${catkin_LIBRARIES})</span>
<span class="nb">ament_target_dependencies</span><span class="p">(</span><span class="s">talker</span>
<span class="w">  </span><span class="s">rclcpp</span>
<span class="w">  </span><span class="s">std_msgs</span><span class="p">)</span>
<span class="c">#install(TARGETS talker</span>
<span class="c">#  RUNTIME DESTINATION ${CATKIN_PACKAGE_BIN_DESTINATION})</span>
<span class="nb">install</span><span class="p">(</span><span class="s">TARGETS</span><span class="w"> </span><span class="s">talker</span>
<span class="w">  </span><span class="s">DESTINATION</span><span class="w"> </span><span class="s">lib/</span><span class="o">${</span><span class="nv">PROJECT_NAME</span><span class="o">}</span><span class="p">)</span>
<span class="nb">install</span><span class="p">(</span><span class="s">DIRECTORY</span><span class="w"> </span><span class="s">include/</span>
<span class="w">  </span><span class="s">DESTINATION</span><span class="w"> </span><span class="s">include</span><span class="p">)</span>
<span class="nb">ament_export_include_directories</span><span class="p">(</span><span class="s">include</span><span class="p">)</span>
<span class="nb">ament_export_dependencies</span><span class="p">(</span><span class="s">std_msgs</span><span class="p">)</span>
<span class="nb">ament_package</span><span class="p">()</span>
</pre></div>
</div>
<p><strong>POR HACER: Muestra cómo se vería esto con ``ament_auto``.</strong></p>
</div>
<div class="section" id="construyendo-el-codigo-ros-2">
<h4>Construyendo el código ROS 2<a class="headerlink" href="#construyendo-el-codigo-ros-2" title="Enlazar permanentemente con este título"></a></h4>
<p>Obtenemos un archivo de configuración del entorno (en este caso, el generado al seguir
el tutorial de instalación de ROS 2, que se construye en <code class="docutils literal notranslate"><span class="pre">~/ros2_ws</span></code>, luego construimos nuestro
paquete usando <code class="docutils literal notranslate"><span class="pre">colcon</span> <span class="pre">build</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>. ~/ros2_ws/install/setup.bash
<span class="nb">cd</span> ~/ros2_talker
colcon build
</pre></div>
</div>
</div>
<div class="section" id="ejecutando-el-nodo-ros-2">
<h4>Ejecutando el nodo ROS 2<a class="headerlink" href="#ejecutando-el-nodo-ros-2" title="Enlazar permanentemente con este título"></a></h4>
<p>Debido a que instalamos el ejecutable <code class="docutils literal notranslate"><span class="pre">talker</span></code> en <code class="docutils literal notranslate"><span class="pre">bin</span></code>, después de obtener el
archivo de instalación, desde nuestro árbol de instalación, podemos invocarlo por nombre directamente
(además, todavía no hay un equivalente de ROS 2 para <code class="docutils literal notranslate"><span class="pre">rosrun</span></code>):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>. ~/ros2_ws/install/setup.bash
talker
</pre></div>
</div>
</div>
</div>
<div class="section" id="actualizar-scripts">
<h3><a class="toc-backref" href="#id13">Actualizar scripts</a><a class="headerlink" href="#actualizar-scripts" title="Enlazar permanentemente con este título"></a></h3>
<div class="section" id="argumentos-de-la-cli-de-ros">
<h4>Argumentos de la CLI de ROS<a class="headerlink" href="#argumentos-de-la-cli-de-ros" title="Enlazar permanentemente con este título"></a></h4>
<p>Desde <a class="reference internal" href="../../Releases/Release-Eloquent-Elusor.html"><span class="doc">ROS Eloquent</span></a>, los argumentos de ROS deben incluirse en el ámbito <code class="docutils literal notranslate"><span class="pre">--ros-args</span></code> y un final <code class="docutils literal notranslate"><span class="pre">--</span></code> (el guión doble final puede ser elidido si no le siguen argumentos).</p>
<p>La reasignación de nombres es similar a ROS 1, tomando la forma <code class="docutils literal notranslate"><span class="pre">from:=to</span></code>, excepto que debe estar precedida por un indicador <code class="docutils literal notranslate"><span class="pre">--remap</span></code> (o <code class="docutils literal notranslate"><span class="pre">-r</span></code>).
Por ejemplo:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ros2 run some_package some_ros_executable --ros-args -r foo:<span class="o">=</span>bar
</pre></div>
</div>
<p>Usamos una sintaxis similar para los parámetros, usando el indicador <code class="docutils literal notranslate"><span class="pre">--param</span></code> (o <code class="docutils literal notranslate"><span class="pre">-p</span></code>):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ros2 run some_package some_ros_executable --ros-args -p my_param:<span class="o">=</span>value
</pre></div>
</div>
<p>Ten en cuenta que esto es diferente al uso de un guión bajo inicial en ROS 1.</p>
<p>Para cambiar el nombre de un nodo, use <code class="docutils literal notranslate"><span class="pre">__node</span></code> (el equivalente de ROS 1 es <code class="docutils literal notranslate"><span class="pre">__name</span></code>):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ros2 run some_package some_ros_executable --ros-args -r __node:<span class="o">=</span>new_node_name
</pre></div>
</div>
<p>Ten en cuenta el uso de la bandera <code class="docutils literal notranslate"><span class="pre">-r</span></code>.
Se necesita el mismo indicador de reasignación para cambiar el espacio de nombres <code class="docutils literal notranslate"><span class="pre">__ns</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ros2 run some_package some_ros_executable --ros-args -r __ns:<span class="o">=</span>/new/namespace
</pre></div>
</div>
<p>No hay equivalente en ROS 2 para las siguientes teclas ROS 1:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">__log</span></code> (pero <code class="docutils literal notranslate"><span class="pre">--log-config-file</span></code> se puede usar para proporcionar un archivo de configuración del registrador)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">__ip</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">__hostname</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">__master</span></code></p></li>
</ul>
<p>Para obtener más información, Consulta el <a class="reference external" href="https://design.ros2.org/articles/ros_command_line_arguments.html">documento de diseño</a>.</p>
<div class="section" id="referencia-rapida">
<h5>Referencia rápida<a class="headerlink" href="#referencia-rapida" title="Enlazar permanentemente con este título"></a></h5>
<table class="docutils align-default">
<colgroup>
<col style="width: 36%" />
<col style="width: 29%" />
<col style="width: 36%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Característica</p></th>
<th class="head"><p>ROS 1</p></th>
<th class="head"><p>RO2</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>remapeo</p></td>
<td><p>foo:=bar</p></td>
<td><p>-r foo:=bar</p></td>
</tr>
<tr class="row-odd"><td><p>parámetros</p></td>
<td><p>_foo:=bar</p></td>
<td><p>-p foo:=bar</p></td>
</tr>
<tr class="row-even"><td><p>nombre de nodo</p></td>
<td><p>__name:=foo</p></td>
<td><p>-r __node:=foo</p></td>
</tr>
<tr class="row-odd"><td><p>namespace</p></td>
<td><p>__ns:=foo</p></td>
<td><p>-r __ns:=foo</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section" id="mas-ejemplos-y-herramientas">
<h3><a class="toc-backref" href="#id14">Más ejemplos y herramientas</a><a class="headerlink" href="#mas-ejemplos-y-herramientas" title="Enlazar permanentemente con este título"></a></h3>
<ul class="simple">
<li><p>El Migrador de archivos de lanzamiento que convierte un archivo launch XML de ROS 1 en un archivo launch de Python de ROS 2: <a class="reference external" href="https://github.com/aws-robotics/ros2-launch-file-migrator">https://github.com/aws-robotics/ros2-launch-file-migrator</a></p></li>
<li><dl class="simple">
<dt>Amazon ha expuesto sus herramientas para portar robots ROS 1 a ROS 2</dt><dd><p><a class="reference external" href="https://github.com/awslabs/ros2-migration-tools/tree/master/porting_tools">https://github.com/awslabs/ros2-migration-tools/tree/master/porting_tools</a></p>
</dd>
</dl>
</li>
</ul>
</div>
</div>
<div class="section" id="licencia">
<h2><a class="toc-backref" href="#id15">Licencia</a><a class="headerlink" href="#licencia" title="Enlazar permanentemente con este título"></a></h2>
<p>En ROS 2, nuestra licencia recomendada es <a class="reference external" href="https://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 License</a>.
En ROS 1, nuestra licencia recomendada era la <a class="reference external" href="https://opensource.org/licenses/BSD-3-Clause">Licencia BSD de 3 cláusulas</a>.</p>
<p>Para cualquier proyecto nuevo recomendamos utilizar la Licencia Apache 2.0, ya sea ROS 1 o ROS 2.</p>
<p>Sin embargo, al migrar código de ROS 1 a ROS 2 no podemos simplemente cambiar la licencia.
La licencia existente debe conservarse para cualquier contribución preexistente.</p>
<p>Con ese fin, si se migra un paquete, recomendamos mantener la licencia existente y continuar contribuyendo a ese paquete bajo la licencia OSI existente, que esperamos sea la licencia BSD para los elementos principales.</p>
<p>Esto mantendrá las cosas claras y fáciles de entender.</p>
<div class="section" id="cambiar-la-licencia">
<h3><a class="toc-backref" href="#id16">Cambiar la licencia</a><a class="headerlink" href="#cambiar-la-licencia" title="Enlazar permanentemente con este título"></a></h3>
<p>Es posible cambiar la licencia, sin embargo, deberá ponerse en contacto con todos los colaboradores y obtener permiso.
Para la mayoría de los paquetes, es probable que esto sea un esfuerzo significativo y no valga la pena considerarlo.
Si el paquete tiene un pequeño conjunto de contribuyentes, entonces esto puede ser factible.</p>
</div>
</div>
</div>



           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Pie de página">
        <a href="Quality-Guide.html" class="btn btn-neutral float-left" title="Guía de calidad: garantizar la calidad del código" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Anterior</a>
        <a href="Migration-Guide-Python.html" class="btn btn-neutral float-right" title="Guía de Python sobre migración desde ROS1" accesskey="n" rel="next">Siguiente <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Derechos de autor 2023, Open Robotics.</p>
  </div>

  Compilado con <a href="https://www.sphinx-doc.org/">Sphinx</a> usando un
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">tema</a>
    proporcionado por <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Other Versions</span>
    v: rolling
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>Releases</dt>
        <dd><a href="../../../humble/The-ROS2-Project/Contributing/Migration-Guide.html">Humble (latest)</a></dd>
        <dd><a href="../../../galactic/The-ROS2-Project/Contributing/Migration-Guide.html">Galactic (EOL)</a></dd>
        
        <dd><a href="../../../foxy/The-ROS2-Project/Contributing/Migration-Guide.html">Foxy</a></dd>
        <dd><a href="../../../eloquent/index.html">Eloquent (EOL)</a></dd>
        
        <dd><a href="../../../dashing/index.html">Dashing (EOL)</a></dd>
        
        <dd><a href="../../../crystal/index.html">Crystal (EOL)</a></dd>
        
    </dl>
    <dl>
      <dt>In Development</dt>
      <dd><a href="Migration-Guide.html">Rolling</a></dd>
    </dl>
  </div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-17821189-2"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-17821189-2', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>